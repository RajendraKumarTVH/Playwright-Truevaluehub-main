<form [formGroup]="costingMaterialInfoform" (ngSubmit)="onFormSubmit()" (change)="onMaterialFormValueChange($event)" autocomplete="off" class="costing-material-information-form">
  <app-material-table
    [materialInfoList]="materialInfoList"
    [processFlag]="processFlag"
    [showAddNewOption]="showAddNewOption"
    [selectedMaterialInfoId]="selectedMaterialInfoId"
    (addMaterialInfo)="onAddMaterial()"
    (editMaterialInfo)="onAddMaterialEdit($event)"
    (deleteMaterialInfo)="onDelete($event)"
    *ngIf="currentPart?.commodityId !== commodityType.Electronics"></app-material-table>

  <app-pcba-material
    *ngIf="currentPart?.commodityId === commodityType.Electronics"
    [formGroup]="formGroups[FormGroupKeysMaterial.Pcba]"
    [electroVals]="{ isEnableUnitConversion, conversionValue, formIdentifier }"
    (doCalculateCost)="doCalculateCost($event)"
    (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
    [processFlags]="processFlag"
    [projectInfoList]="projectInfoList"
    [currentPart]="currentPart"
    [billofMaterialList]="billofMaterialList"></app-pcba-material>

  @if (materialInfoList?.length > 0) {
    <div>
      <ng-template #popContent>
        <div [innerHTML]="name"></div>
        <div class="div-img" *ngIf="url">
          <img alt="" class="img-class" [src]="url" />
        </div>
      </ng-template>
    </div>
    <mat-tab-group class="material-tab-bordered-container">
      <mat-tab *ngFor="let tab of visibleTabs; let i = index" [label]="tab">
        <ng-container *ngIf="tab === 'Material Info'">
          <div class="row" *ngIf="currentPart?.commodityId !== commodityType.Electronics">
            <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{ currentCommodityId === 4 ? 'Stock Material' : 'Process Group' }}
                  <span class="clsred">*</span>
                </span>
                <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Material_Process_Group')">
                  <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                </span>
              </label>
              <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'matPrimaryProcessName'"></app-field-comment>
              <select
                formControlName="matPrimaryProcessName"
                [ngClass]="{
                  'input-mandatory': f.matPrimaryProcessName.errors,
                  'input-valid': f.matPrimaryProcessName.valid && !f.matPrimaryProcessName.dirty,
                  'input-overridden': f.matPrimaryProcessName.dirty && f.matPrimaryProcessName.touched,
                }"
                (change)="onPrimaryProcessChange($event)"
                class="form-control">
                <option value="" selected>{{ currentCommodityId === 4 ? 'Select Stock Material' : 'Select Process Group' }}</option>
                <optgroup *ngFor="let processType of processList" label="{{ processType.group }}">
                  <option *ngFor="let type of processType.data" [value]="type.processId">
                    {{ type.primaryProcess }}
                  </option>
                </optgroup>
              </select>
            </div>

            <div
              class="col-4"
              *ngIf="
                processFlag.IsProcessNoBakeCasting ||
                processFlag.IsProcessInvestmentCasting ||
                processFlag.IsProcessGreenCasting ||
                processFlag.IsProcessGDCCasting ||
                processFlag.IsProcessLPDCCasting ||
                processFlag.IsProcessShellCasting ||
                processFlag.IsProcessVProcessSandCasting ||
                processFlag.IsProcessSand3DPrinting
              ">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Sub Process:</span>
                <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Casting_Sub_Process')">
                  <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                </span>
              </label>
              <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'secondaryProcessId'"></app-field-comment>
              <select
                *ngIf="
                  processFlag.IsProcessNoBakeCasting ||
                  processFlag.IsProcessGreenCasting ||
                  processFlag.IsProcessGDCCasting ||
                  processFlag.IsProcessLPDCCasting ||
                  processFlag.IsProcessShellCasting ||
                  processFlag.IsProcessVProcessSandCasting ||
                  processFlag.IsProcessSand3DPrinting
                "
                formControlName="secondaryProcessId"
                class="form-control"
                (change)="onCastingSubProcessChange($event)">
                <option value="" selected>Select Sub Process</option>
                <option value="1">Metal Cost</option>
                <option value="2">Sand For Core Making</option>
                <option value="3" [ngClass]="{ 'd-none': processFlag.IsProcessGDCCasting || processFlag.IsProcessLPDCCasting }">Sand For Mold Making</option>
              </select>
              <select *ngIf="processFlag.IsProcessInvestmentCasting" formControlName="secondaryProcessId" class="form-control" (change)="onCastingSubProcessChange($event)">
                <option value="" selected>Select Sub Process</option>
                <option value="1">Metal Cost</option>
                <!-- <option value="3">Sand For Mold Making</option> -->
                <option value="4">Pattern Wax</option>
                <option value="5">Slurry Cost</option>
                <option value="7">Zircon Sand</option>
              </select>
            </div>
            <div class="col-4 position-relative" *ngIf="processFlag.IsProcessCasting && processFlag.IsProcessTypeSandForCore" style="display: none">
              <a href="javascript:void(0)" class="link-info add-feature-icon" (click)="openCadViewer()">
                <mat-icon class="mat-primary" matTooltip="Open Viewer" matTooltipPosition="above">add_to_queue</mat-icon>
              </a>
              <a
                href="javascript:void(0)"
                class="link-info pull-feature-icon"
                (click)="autoPullSandData('core sand')"
                *ngIf="
                  sharedService.extractedCoreData &&
                  sharedService.extractedCoreData?.length > 0 &&
                  (sandForCoreFormArray?.length === 0 || (sandForCoreFormArray?.length === 1 && sandForCoreFormArray?.controls[0]?.value?.coreLength === 0))
                ">
                <mat-icon class="mat-primary" matTooltip="Auto Pull Data" matTooltipPosition="above">system_update_alt</mat-icon>
              </a>
            </div>
          </div>

          <app-pcb-material
            [formGroup]="formGroups[FormGroupKeysMaterial.Pcb]"
            [passivationVals]="{
              isEnableUnitConversion,
              conversionValue,
              formIdentifier,
            }"
            (doCalculateCost)="doCalculateCost($event)"
            (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
            *ngIf="processFlag.IsProcessConventionalPCB || processFlag.IsProcessRigidFlexPCB || processFlag.IsProcessSemiRigidFlexPCB"
            [currentPart]="currentPart"
            [processFlag]="processFlag"></app-pcb-material>

          <app-custom-cable-material
            *ngIf="processFlag.IsProcessCustomizeCable"
            [formGroup]="formGroups[FormGroupKeysMaterial.CustomCable]"
            [costingMaterialInfoFormGroup]="costingMaterialInfoform"
            [compVals]="{
              isEnableUnitConversion,
              conversionValue,
              formIdentifier,
              plasticMaterialList,
              isTypeOfConductorsEnabled,
              nonFerrousMaterialList,
              cableTypes,
              custom,
              IsMaterialTypeNonFerrous,
              currentPart,
              selectedProject,
            }"
            (doCalculateCost)="doCalculateCost($event)"
            (actionEmitter)="onCustomCableEmitterReceived($event)"></app-custom-cable-material>

          <!-- <app-rigid-flex-material
            *ngIf="processFlag.IsProcessRigidFlexPCB"
            [formGroup]="rigidFlexMaterialFormGroup"
            [inputVals]="{ isEnableUnitConversion, conversionValue, formIdentifier }"
            (doCalculateCost)="doCalculateCost($event)"
            (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"></app-rigid-flex-material> -->

          <div
            class="row"
            *ngIf="
              !processFlag.IsProcessCustomizeCable &&
              !processFlag.IsProcessConventionalPCB &&
              !processFlag.IsProcessRigidFlexPCB &&
              !processFlag.IsProcessSemiRigidFlexPCB &&
              currentPart?.commodityId !== commodityType.Electronics
            ">
            <div class="col-12">
              <div class="card">
                <div class="card-header">Material Selection</div>
                <div class="card-body">
                  <div class="row no-border">
                    <div class="col-12">
                      <a class="search-link" (click)="openDialog(dialogTemplate)">
                        <mat-icon color="primary" svgIcon="search_icon"></mat-icon>
                        Search Materials
                      </a>
                    </div>
                  </div>
                  <div class="row" style="display: none">
                    <div class="col-4">
                      <input type="text" class="form-control" formControlName="searchText" placeholder="Search materials (Ex:General)" (change)="searchMaterialsClick($event)" />
                    </div>
                    <div class="col-8">
                      <select (change)="onSearchResultChange($event)" class="form-control">
                        <option value="" selected>Category- Family -Description</option>
                        <option *ngFor="let group of this.materialSearchList" value="{{ group.materialDescId }}">
                          {{ group.materialGroupName }} - {{ group.materialTypeName }}-
                          {{ group.materialDescription }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Category</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Category')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'materialCategory'"></app-field-comment>
                      <div class="dropdown-wrap">
                        <select
                          formControlName="materialCategory"
                          (change)="onGroupChange($event)"
                          class="form-control"
                          #materialCategorySelect
                          [ngClass]="{
                            'input-mandatory': f.materialCategory.errors,
                            'input-valid': f.materialCategory.valid && !selectedMaterialInfo.isAiSuggested && !f.materialCategory.dirty,
                            'input-overridden': f.materialCategory.dirty && f.materialCategory.touched,
                            'input-yellow': f.materialDescription.valid && selectedMaterialInfo.isAiSuggested,
                          }">
                          <option value="" selected>Select Material Category</option>
                          @for (option of materialCategoryList; track option) {
                            <option [value]="option">
                              {{ option }}
                            </option>
                          }
                        </select>
                        <mat-icon class="dropdown-arrow" svgIcon="downArrow_icon"></mat-icon>
                      </div>
                    </div>
                    <div class="col">
                      <div class="form-group">
                        <label class="form-label input-sm no-wrap has-icon">
                          <span class="label-text">Family</span>
                          <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Family')">
                            <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                          </span>
                        </label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'materialFamily'"></app-field-comment>
                        <div class="dropdown-wrap">
                          <select
                            formControlName="materialFamily"
                            class="form-control"
                            (change)="onMaterialTypeChange($event)"
                            #materialFamilySelect
                            placeholder="Select Material Family"
                            id="materialtype"
                            [ngClass]="{
                              'input-mandatory': f.materialFamily.errors,
                              'input-valid': f.materialFamily.valid && !selectedMaterialInfo.isAiSuggested && !f.materialFamily.dirty,
                              'input-overridden': f.materialFamily.dirty && f.materialFamily.touched,
                              'input-yellow': f.materialDescription.valid && selectedMaterialInfo.isAiSuggested,
                            }">
                            <option value="" selected>Select Material Family</option>
                            @for (option of materialTypeList; track $index) {
                              <option [value]="option.materialTypeId">
                                {{ option.materialTypeName }}
                              </option>
                            }
                          </select>
                          <mat-icon class="dropdown-arrow" svgIcon="downArrow_icon"></mat-icon>
                        </div>
                      </div>
                    </div>
                    <div class="col">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Description/Grade</span>
                          <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Description')">
                            <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                          </span>
                        </label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'materialDescription'"></app-field-comment>
                        <div class="dropdown-wrap">
                          <select
                            formControlName="materialDescription"
                            class="form-control"
                            #materialDescriptionSelect
                            (change)="onMaterialDescChange($event)"
                            [ngClass]="{
                              'input-mandatory': f.materialDescription.errors,
                              'input-valid': f.materialDescription.valid && !selectedMaterialInfo.isAiSuggested && !f.materialDescription.dirty,
                              'input-overridden': f.materialDescription.dirty && f.materialDescription.touched,
                              'input-yellow': f.materialDescription.valid && selectedMaterialInfo.isAiSuggested,
                            }">
                            <option value="" selected>Select Description</option>
                            @for (option of materialDescriptionList; track option.materialMasterId) {
                              <option [value]="option.materialMasterId">
                                {{ option.materialDescription }}
                              </option>
                            }
                          </select>
                          <mat-icon class="dropdown-arrow" svgIcon="downArrow_icon"></mat-icon>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div
                      class="col-4"
                      *ngIf="
                        !processFlag.IsProcessSpotWelding &&
                        !processFlag.IsProcessInsulationJacket &&
                        !processFlag.IsProcessTypeRubberInjectionMolding &&
                        !processFlag.IsProcessTypeCompressionMolding &&
                        !processFlag.IsProcessTypeTransferMolding
                      ">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Stock Form</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Stock_Form')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'stockForm'"></app-field-comment>
                      <div class="dropdown-wrap">
                        <select
                          formControlName="stockForm"
                          class="form-control"
                          (change)="onStockFormChange($event)"
                          [ngClass]="{
                            'input-mandatory': f.stockForm.errors,
                            'input-valid': f.stockForm.valid && !f.stockForm.dirty,
                            'input-overridden': f.stockForm.dirty && f.stockForm.touched,
                          }">
                          <option value="" selected>Select Stock Form</option>
                          @for (option of stockFormList; track option.formName) {
                            <option [value]="option.formName">
                              {{ option.formName }}
                            </option>
                          }
                        </select>
                        <mat-icon class="dropdown-arrow" svgIcon="downArrow_icon"></mat-icon>
                      </div>
                    </div>
                    <div
                      class="col-4"
                      *ngIf="
                        (processFlag.IsProcessInvestmentCasting && !(processFlag.IsProcessTypeSlurryCost || processFlag.IsProcessTypeZirconSand)) ||
                        processFlag.IsProcessGDCCasting ||
                        processFlag.IsProcessLPDCCasting ||
                        processFlag.IsProcessNoBakeCasting ||
                        processFlag.IsProcessGreenCasting ||
                        (!processFlag.IsProcessTypeSandForMold &&
                          !processFlag.IsProcessTypePouring &&
                          !processFlag.IsProcessCableAssembly &&
                          !processFlag.IsProcessTypePowderCoating &&
                          !processFlag.IsProcessTypePowderPainting &&
                          !processFlag.IsProcessTypePlating &&
                          !processFlag.IsProcessTypeWetPainting &&
                          !processFlag.IsProcessTypeSiliconCoatingAuto &&
                          !processFlag.IsProcessTypeSiliconCoatingSemi &&
                          !processFlag.IsProcessTypeGalvanization)
                      ">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ processFlag.IsProcessHPDCCasting || processFlag.IsProcessGreenCasting || this.processFlag.IsProcessLPDCCasting ? 'Machining ' : '' }}Scrap Price ($/Kg)
                        </span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Scrap_Price')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'scrapPrice'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.scrapPrice.errors,
                          'input-valid': f.scrapPrice.valid && !f.scrapPrice.dirty,
                          'input-overridden': f.scrapPrice.dirty && f.scrapPrice.touched,
                        }"
                        formControlName="scrapPrice"
                        [OnlyNumber]="true"
                        class="form-control"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>
                    <div class="col-4 ml-auto" *ngIf="!processFlag.IsProcessCableAssembly">
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeSandForMold">{{ processFlag.IsProcessNoBakeCasting ? 'No Bake' : 'Green' }} Sand Price ($/Kg):</label>
                      <label class="form-label no-wrap has-icon" *ngIf="!processFlag.IsProcessTypeSandForMold">
                        <span class="label-text" *ngIf="!processFlag.IsProcessHPDCCasting && !this.processFlag.IsProcessLPDCCasting">
                          {{ processFlag.IsProcessTypePatternWax ? 'Pattern Wax Cost ($/Kg)' : 'Material Price ($/Kg)' }}
                        </span>
                        <span class="label-text" *ngIf="processFlag.IsProcessHPDCCasting || this.processFlag.IsProcessLPDCCasting">
                          Material Price ($/Kg)
                          <!-- Material Price ($/{{ processFlag.IsProcessHPDCCasting || this.processFlag.IsProcessLPDCCasting ? 'g' : 'Kg' }}) -->
                        </span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Raw_material_Price')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'matPrice'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.matPrice.errors,
                          'input-valid': f.matPrice.valid && !f.matPrice.dirty,
                          'input-overridden': f.matPrice.dirty && f.matPrice.touched,
                        }"
                        class="form-control"
                        [OnlyNumber]="true"
                        formControlName="matPrice"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>

                    <div class="col-4" *ngIf="processFlag.IsProcessTypeRubberInjectionMolding || processFlag.IsProcessTypeCompressionMolding || processFlag.IsProcessTypeTransferMolding">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Part Type</span>
                        <!-- <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Stock_Form')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span> -->
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'partFinish'"></app-field-comment>
                      <div class="dropdown-wrap">
                        <select
                          formControlName="partFinish"
                          class="form-control"
                          (change)="calculateCost('partFinish')"
                          [ngClass]="{
                            'input-mandatory': f.partFinish.errors,
                            'input-valid': f.partFinish.valid && !f.partFinish.dirty,
                            'input-overridden': f.partFinish.dirty && f.partFinish.touched,
                          }">
                          <option value="" selected>Select Part Type</option>
                          @for (option of rubberMoldingPartTypeList; track option.id) {
                            <option [value]="option.id">
                              {{ option.name }}
                            </option>
                          }
                        </select>
                        <mat-icon class="dropdown-arrow" svgIcon="downArrow_icon"></mat-icon>
                      </div>
                    </div>

                    <div
                      class="col-4 position-relative"
                      *ngIf="
                        processFlag.IsProcessInvestmentCasting ||
                        processFlag.IsProcessGDCCasting ||
                        processFlag.IsProcessLPDCCasting ||
                        processFlag.IsProcessNoBakeCasting ||
                        processFlag.IsProcessGreenCasting ||
                        (!processFlag.IsProcessTypePouring &&
                          !processFlag.IsProcessTypeSandForCore &&
                          !processFlag.IsProcessCableAssembly &&
                          !processFlag.IsProcessTypePlating &&
                          !processFlag.IsProcessTypeGalvanization &&
                          !processFlag.IsProcessTypePowderCoating &&
                          !processFlag.IsProcessTypePowderPainting &&
                          !processFlag.IsProcessMetalTubeExtrusion &&
                          !processFlag.IsProcessMachining &&
                          !processFlag.IsProcessTubeBending &&
                          !processFlag.IsProcessInsulationJacket &&
                          !processFlag.IsProcessMetalExtrusion &&
                          !processFlag.IsProcessPlasticVacuumForming &&
                          !processFlag.IsProcessTypeRubberInjectionMolding &&
                          !processFlag.IsProcessTypeCompressionMolding &&
                          !processFlag.IsProcessTypeTransferMolding)
                      ">
                      <label class="form-label no-wrap has-icon" *ngIf="!forging.coldForgingClosedDieHot && !this.processFlag.IsProcessColdForgingColdHeading">
                        <span class="label-text">Volume Purchased (Ton/Contract)</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Volume_Purchased')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <label class="form-label no-wrap" *ngIf="forging.coldForgingClosedDieHot || this.processFlag.IsProcessColdForgingColdHeading">Coil Weight (Ton):</label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'volumePurchased'"></app-field-comment>
                      <input type="number" class="form-control" [OnlyNumber]="true" formControlName="volumePurchased" (blur)="onBlurEvent($event)" min="0" />
                    </div>
                    <div
                      class="col-4 position-relative"
                      *ngIf="
                        processFlag.IsProcessInvestmentCasting ||
                        processFlag.IsProcessGDCCasting ||
                        processFlag.IsProcessLPDCCasting ||
                        processFlag.IsProcessNoBakeCasting ||
                        processFlag.IsProcessGreenCasting ||
                        (!processFlag.IsProcessTypePouring &&
                          !processFlag.IsProcessTypeSandForCore &&
                          !processFlag.IsProcessCableAssembly &&
                          !processFlag.IsProcessTypePlating &&
                          !processFlag.IsProcessTypeGalvanization &&
                          !processFlag.IsProcessTypePowderCoating &&
                          !processFlag.IsProcessTypePowderPainting &&
                          !processFlag.IsProcessMetalTubeExtrusion &&
                          !processFlag.IsProcessMachining &&
                          !processFlag.IsProcessTubeBending &&
                          !processFlag.IsProcessInsulationJacket &&
                          !processFlag.IsProcessMetalExtrusion &&
                          !processFlag.IsProcessPlasticVacuumForming &&
                          !processFlag.IsProcessTypeRubberInjectionMolding &&
                          !processFlag.IsProcessTypeCompressionMolding &&
                          !processFlag.IsProcessTypeTransferMolding)
                      ">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Volume Discount (%)</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Volume_Discount')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'volumeDiscountPer'"></app-field-comment>
                      <input type="number" class="form-control" [OnlyNumber]="true" formControlName="volumeDiscountPer" (blur)="onBlurEvent($event)" min="0" />
                    </div>

                    <div
                      class="col-4"
                      [ngClass]="{ 'offset-4': processFlag.IsProcessTypePlating }"
                      *ngIf="
                        currentCommodityId === 4 ||
                        processFlag.IsProcessInvestmentCasting ||
                        processFlag.IsProcessTypeWetPainting ||
                        processFlag.IsProcessTypeSiliconCoatingAuto ||
                        processFlag.IsProcessTypeSiliconCoatingSemi ||
                        processFlag.IsProcessMetalTubeExtrusion ||
                        processFlag.IsProcessTubeBending ||
                        processFlag.IsProcessInsulationJacket ||
                        processFlag.IsProcessMetalExtrusion
                      ">
                      <label class="form-label no-wrap">
                        {{ processFlag.IsProcessTypeSlurryCost ? 'Slurry' : processFlag.IsProcessTypePatternWax ? 'Pattern Wax' : processFlag.IsProcessTypeWetPainting ? 'Primer' : '' }}
                        Density (g/cc)
                      </label>
                      <ng-container *ngTemplateOutlet="density; context: { labelRequired: false }"></ng-container>
                    </div>

                    <div
                      class="col-4 position-relative"
                      *ngIf="
                        processFlag.IsProcessInvestmentCasting ||
                        processFlag.IsProcessGDCCasting ||
                        processFlag.IsProcessLPDCCasting ||
                        processFlag.IsProcessNoBakeCasting ||
                        processFlag.IsProcessGreenCasting ||
                        (!processFlag.IsProcessTypePouring &&
                          !processFlag.IsProcessTypeSandForCore &&
                          !processFlag.IsProcessCableAssembly &&
                          !processFlag.IsProcessTypePlating &&
                          !processFlag.IsProcessTypeGalvanization &&
                          !processFlag.IsProcessTypePowderCoating &&
                          !processFlag.IsProcessTypePowderPainting &&
                          !processFlag.IsProcessMetalTubeExtrusion &&
                          !processFlag.IsProcessMachining &&
                          !processFlag.IsProcessTubeBending &&
                          !processFlag.IsProcessInsulationJacket &&
                          !processFlag.IsProcessMetalExtrusion &&
                          !processFlag.IsProcessPlasticVacuumForming &&
                          !processFlag.IsProcessTypeRubberInjectionMolding &&
                          !processFlag.IsProcessTypeCompressionMolding &&
                          !processFlag.IsProcessTypeTransferMolding)
                      ">
                      <label class="form-label no-wrap has-icon">
                        <!-- <span class="label-text">Discounted Material Price ($/{{ processFlag.IsProcessHPDCCasting || this.processFlag.IsProcessLPDCCasting ? 'g' : 'Kg' }})</span> -->
                        <span class="label-text">Discounted Material Price ($/Kg)</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Discounted_Material_Price')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'matPriceGross'"></app-field-comment>
                      <input type="number" class="form-control" readonly="true" [OnlyNumber]="true" formControlName="matPriceGross" (blur)="onBlurEvent($event)" min="0" />
                      <!-- value="costingMaterialInfoform.get('matPriceGross')?.value / 100 | percent:'1.2-2'" -->
                    </div>

                    <div class="col-4" *ngIf="processFlag.IsProcessInvestmentCasting && processFlag.IsProcessTypePatternWax">
                      <label class="form-label no-wrap">Pattern Wax Weight(g):</label>
                      <ng-container *ngTemplateOutlet="netWeight; context: { labelRequired: false }"></ng-container>
                    </div>

                    <div
                      class="col-4"
                      *ngIf="processFlag.IsProcessInvestmentCasting && processFlag.IsProcessTypePatternWax"
                      [ngClass]="{
                        'offset-4': processFlag.IsProcessInvestmentCasting && processFlag.IsProcessTypePatternWax,
                      }">
                      <ng-container *ngTemplateOutlet="netMaterialCost; context: { labelRequired: true }"></ng-container>
                    </div>
                  </div>

                  <div class="row" *ngIf="(forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading">
                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{
                            (forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading
                              ? 'Forged Weight (Net) per part (g)'
                              : processFlag.IsProcessTypeChromePlating
                                ? 'Minimum layer weight of coating'
                                : 'Net weight(g)'
                          }}
                        </span>
                        <app-info-tooltip
                          [infoId]="
                            (forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading
                              ? 'Forging_Forged_Weight'
                              : processFlag.IsProcessTypeChromePlating
                                ? 'Minimum_Layer_Weight_Of_Coating'
                                : 'Part_Net_Weight'
                          "></app-info-tooltip>
                      </label>
                      <ng-container *ngTemplateOutlet="netWeight; context: { labelRequired: false }"></ng-container>
                    </div>

                    <div class="col-4 position-relative">
                      <ng-container *ngTemplateOutlet="partProjectArea; context: { labelRequired: true }"></ng-container>
                    </div>

                    <div class="col-4 position-relative">
                      <ng-container *ngTemplateOutlet="partVolume; context: { labelRequired: true }"></ng-container>
                    </div>
                  </div>

                  <div class="row" *ngIf="(forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading">
                    <div class="col-4 mt-2 position-relative">
                      <ng-container *ngTemplateOutlet="partLengthField; context: { labelRequired: true }"></ng-container>
                    </div>
                    <div class="col-4 mt-2 position-relative">
                      <ng-container *ngTemplateOutlet="partWidthField; context: { labelRequired: true }"></ng-container>
                    </div>
                    <div class="col-4 mt-2 position-relative">
                      <ng-container *ngTemplateOutlet="partHeightField; context: { labelRequired: true }"></ng-container>
                    </div>
                    <div class="col-4 mt-2">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Density of Raw Material(g/cm^3)</span>
                        <app-info-tooltip [infoId]="'Forging_Density_Of_Raw_Material'"></app-info-tooltip>
                      </label>
                      <ng-container *ngTemplateOutlet="density; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4 mt-2" *ngIf="(processFlag.IsProcessStockFormRound || processFlag.IsProcessStockFormRectangleBar) && forging.hotForgingOpenDieHot">
                      <label class="form-label no-wrap has-icon" for="inputBilletLength">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Billet Bar Length (' + conversionValue + ')' : 'Billet Bar Length (mm)' }}
                        </span>
                        <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Length_mm')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'inputBilletLength'"></app-field-comment>
                      <input
                        id="inputBilletLength"
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.inputBilletLength.errors,
                          'input-valid': f.inputBilletLength.valid && !f.inputBilletLength.dirty,
                          'input-overridden': f.inputBilletLength.dirty && f.inputBilletLength.touched,
                        }"
                        class="form-control"
                        formControlName="inputBilletLength"
                        [OnlyNumber]="true"
                        placeholder="Input Billet Length"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>
                    <!-- <div class="col-4 mt-2" *ngIf="!IsProcessStockFormRound && !forging.hotForgingClosedDieHot">
              <label class="form-label no-wrap">
                {{isEnableUnitConversion ?
                'Input Billet Width ('+ conversionValue + ')' : 'Input Billet Width (mm)'
                }} :
                <span class="notification" [ngbPopover]="popContent" placement="auto" popoverTitle="Description"
                  (click)="showinfo('Envelope_Width_mm')"><mat-icon class="info-icon" svgIcon="information"></mat-icon></span>:
              </label>
              <app-field-comment [formIdentifier]="formIdentifier"
                [fieldIdentifier]="'inputBilletWidth'"></app-field-comment>
              <input type="number"
                [ngClass]="{'input-mandatory':f.inputBilletWidth.errors,'input-valid': f.inputBilletWidth.valid && !f.inputBilletWidth.dirty, 'input-overridden': f.inputBilletWidth.dirty && f.inputBilletWidth.touched}"
                class="form-control" formControlName="inputBilletWidth" [OnlyNumber]="true"
                placeholder="InputBilletWidth" (blur)="onBlurEvent($event)" min="0" />
            </div>
            <div class="col-4 mt-2" *ngIf="!IsProcessStockFormRound && !forging.hotForgingClosedDieHot">
              <label class="form-label no-wrap">
                {{isEnableUnitConversion ?
                'Input Billet Height ('+ conversionValue + ')' : 'Input Billet Height (mm)'
                }} :<span class="notification" [ngbPopover]="popContent" placement="auto" popoverTitle="Description"
                  (click)="showinfo('Envelope_Height_mm')"><mat-icon class="info-icon" svgIcon="information"></mat-icon></span>:</label>
              <app-field-comment [formIdentifier]="formIdentifier"
                [fieldIdentifier]="'inputBilletHeight'"></app-field-comment>
              <input type="number"
                [ngClass]="{'input-mandatory':f.inputBilletHeight.errors,'input-valid': f.inputBilletHeight.valid && !f.inputBilletHeight.dirty, 'input-overridden': f.inputBilletHeight.dirty && f.inputBilletHeight.touched}"
                class="form-control" formControlName="inputBilletHeight" [OnlyNumber]="true"
                placeholder="Input Billet Height" (blur)="onBlurEvent($event)" min="0" />
            </div> -->

                    <div class="col-4 mt-2" *ngIf="processFlag.IsProcessStockFormRound && forging.hotForgingOpenDieHot">
                      <ng-container *ngTemplateOutlet="inputBilletDiameter; context: { labelRequired: true }"></ng-container>
                      <!-- <label class="form-label no-wrap">
                {{isEnableUnitConversion ?
                'Billet Diameter('+ conversionValue + ')' : 'Billet Diameter (mm)'
                }} :</label>
              <app-field-comment [formIdentifier]="formIdentifier"
                [fieldIdentifier]="'inputBilletDiameter'"></app-field-comment>
              <input type="number" [ngClass]="{
                    'input-valid': costingMaterialInfoform.controls['inputBilletDiameter']?.touched &&costingMaterialInfoform.controls['inputBilletDiameter']?.valid,
                    'input-yellow': costingMaterialInfoform.controls['inputBilletDiameter']?.touched &&costingMaterialInfoform.controls['inputBilletDiameter']?.invalid
                  }" class="form-control input-sm input-auto" formControlName="inputBilletDiameter"
                placeholder="inputBilletDiameter" (blur)="onBlurEvent($event)" min="0" /> -->
                    </div>

                    <!-- <div class="col-4 mt-2" *ngIf="IsProcessStockFormRound && !forging.hotForgingClosedDieHot">
              <label class="form-label no-wrap">
                {{isEnableUnitConversion ?
                'Part Min Dia ('+ conversionValue + ')' : 'Part Min Dia (mm)'
                }} :</label>
              <app-field-comment [formIdentifier]="formIdentifier"
                [fieldIdentifier]="'partInnerDiameter'"></app-field-comment>
              <input type="number" [ngClass]="{
                    'input-valid': costingMaterialInfoform.controls['partInnerDiameter']?.touched &&costingMaterialInfoform.controls['partInnerDiameter']?.valid,
                    'input-yellow': costingMaterialInfoform.controls['partInnerDiameter']?.touched &&costingMaterialInfoform.controls['partInnerDiameter']?.invalid
                  }" class="form-control input-sm input-auto" formControlName="partInnerDiameter"
                placeholder="partInnerDiameter" (blur)="onBlurEvent($event)" min="0" />
            </div>

            <div class="col-4 mt-2" *ngIf="IsProcessStockFormRound && !forging.hotForgingClosedDieHot">
              <label class="form-label no-wrap">
                {{isEnableUnitConversion ?
                'Part Max Dia ('+ conversionValue + ')' : 'Part Max Dia (mm)'
                }} :</label>
              <app-field-comment [formIdentifier]="formIdentifier"
                [fieldIdentifier]="'partOuterDiameter'"></app-field-comment>
              <input type="number" [ngClass]="{
                    'input-valid': costingMaterialInfoform.controls['partOuterDiameter']?.touched &&costingMaterialInfoform.controls['partOuterDiameter']?.valid,
                    'input-yellow': costingMaterialInfoform.controls['partOuterDiameter']?.touched &&costingMaterialInfoform.controls['partOuterDiameter']?.invalid
                  }" class="form-control input-sm input-auto" formControlName="partOuterDiameter"
                placeholder="partOuterDiameter" (blur)="onBlurEvent($event)" min="0" />
            </div> -->
                    <!-- <div class="col-4 mt-2" *ngIf="!forging.hotForgingClosedDieHot">
              <label class="form-label no-wrap">
                {{isEnableUnitConversion ?
                'Saw/Billet cutting allowance ('+ conversionValue + ')' : 'Saw/Billet cutting allowance (mm)'
                }} :</label>
              <app-field-comment [formIdentifier]="formIdentifier"
                [fieldIdentifier]="'cuttingAllowance'"></app-field-comment>
              <input type="number" class="form-control" [OnlyNumber]="true" formControlName="cuttingAllowance"
                (blur)="onBlurEvent($event)" min="0" />
            </div> -->
                    <div
                      class="col-4 mt-2"
                      *ngIf="
                        !forging.hotForgingClosedDieHot &&
                        !forging.coldForgingClosedDieHot &&
                        !((processFlag.IsProcessStockFormRound || processFlag.IsProcessStockFormWire) && forging.coldForgingColdHeadingDie)
                      ">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Stock Length (' + conversionValue + ')' : 'Stock Length (mm)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Forging_Stock_Length'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'blockLength'"></app-field-comment>
                      <input type="number" class="form-control" readonly="readonly" formControlName="blockLength" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
                    </div>
                    <div
                      class="col-4 mt-2"
                      *ngIf="!processFlag.IsProcessStockFormRound && !forging.coldForgingClosedDieHot && !(processFlag.IsProcessStockFormWire && forging.coldForgingColdHeadingDie)">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Stock Width (' + conversionValue + ')' : 'Stock Width(mm)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Stock_Width'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'blockWidth'"></app-field-comment>
                      <input type="number" class="form-control" formControlName="blockWidth" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
                    </div>

                    <div class="col-4 mt-2" *ngIf="!processFlag.IsProcessStockFormRound && !forging.coldForgingClosedDieHot && !this.processFlag.IsProcessColdForgingColdHeading">
                      <label class="form-label no-wrap has-icon" *ngIf="!forging.hotForgingClosedDieHot || forging.hotForgingOpenDieHot">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Stock Height/ Thickness (' + conversionValue + ')' : 'Stock Height/ Thickness(mm)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Stock_Height_Thickness'"></app-info-tooltip>
                      </label>
                      <label class="form-label no-wrap" *ngIf="!forging.hotForgingClosedDieHot && !forging.hotForgingOpenDieHot && !this.processFlag.IsProcessColdForgingColdHeading">
                        {{ isEnableUnitConversion ? 'Stock Height (' + conversionValue + ')' : 'Stock Height(mm)' }}
                      </label>

                      <!-- <label class="form-label no-wrap"
                *ngIf="!forging.coldForgingClosedDieHot && !forging.hotForgingOpenDieHot  && !this.IsProcessColdForgingColdHeading">
                {{isEnableUnitConversion ?
                'Raw Material Diameter ('+ conversionValue + ')' : 'Raw Material Diameter (mm)'
                }} :</label> -->
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'blockHeight'"></app-field-comment>
                      <input type="number" class="form-control" formControlName="blockHeight" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
                    </div>

                    <!-- <div class="col-4 mt-2" *ngIf="!processFlag.IsProcessStockFormRound && !processFlag.IsProcessStockFormRectangleBar"> -->
                    <div class="col-4 mt-2" *ngIf="!processFlag.IsProcessStockFormRectangleBar">
                      <label class="form-label no-wrap has-icon" *ngIf="!forging.coldForgingClosedDieHot && !processFlag.IsProcessColdForgingColdHeading">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Stock diameter (' + conversionValue + ')' : 'Stock diameter (mm)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Forging_Stock_Diameter'"></app-info-tooltip>
                      </label>
                      <label class="form-label no-wrap has-icon" *ngIf="forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Raw Material Diameter (' + conversionValue + ')' : 'Raw Material Diameter (mm)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Forging_Raw_Material_Diameter'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'stockDiameter'"></app-field-comment>
                      <input type="number" class="form-control" [OnlyNumber]="true" formControlName="stockDiameter" (blur)="onBlurEvent($event)" min="0" />
                    </div>
                  </div>

                  <div class="row" *ngIf="(forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading">
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Gross weight/Part(g)</span>
                          <app-info-tooltip [infoId]="'Forging_gross_weight'"></app-info-tooltip>
                        </label>
                        <input type="number" class="form-control" readonly="readonly" formControlName="grossWeight" id="grossWeight" />
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Material scrap /Part(g)</span>
                          <app-info-tooltip [infoId]="'Forging_material_scrap_per_part'"></app-info-tooltip>
                        </label>
                        <ng-container *ngTemplateOutlet="scrapWeight; context: { labelRequired: false }"></ng-container>
                      </div>
                    </div>

                    <div class="col-4" *ngIf="forging.hotForgingClosedDieHot && false">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Scrap Recovery(%):</span>
                          <app-info-tooltip [infoId]="'Part_Scrap_Recovery_Percentage'"></app-info-tooltip>
                        </label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'scrapRecovery'"></app-field-comment>
                        <input type="number" class="form-control" formControlName="scrapRecovery" (blur)="onBlurEvent($event)" />
                      </div>
                    </div>
                  </div>
                  <div class="row" *ngIf="(forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading">
                    <div class="col-4">
                      <div class="form-group">
                        <ng-container *ngTemplateOutlet="scrapRecCost; context: { labelRequired: true }"></ng-container>
                      </div>
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Material Utilization Ratio</span>
                        <app-info-tooltip [infoId]="'Forging_material_utilization_ratio'"></app-info-tooltip>
                      </label>
                      <ng-container *ngTemplateOutlet="utilisation; context: { labelRequired: false }"></ng-container>
                    </div>

                    <div class="col-4" *ngIf="forging.hotForgingClosedDieHot && false">
                      <div class="form-group">
                        <ng-container *ngTemplateOutlet="grossMaterialCost; context: { labelRequired: true }"></ng-container>
                      </div>
                    </div>
                  </div>
                  <div class="row" *ngIf="(forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot">
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Perimeter (mm)</span>
                          <app-info-tooltip [infoId]="'Forging_perimeter'"></app-info-tooltip>
                        </label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'perimeter'"></app-field-comment>
                        <input type="number" class="form-control" formControlName="perimeter" (blur)="onBlurEvent($event)" />
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Flash Volume (gm)</span>
                          <app-info-tooltip [infoId]="'Forging_flash_volume'"></app-info-tooltip>
                        </label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'flashVolume'"></app-field-comment>
                        <input type="number" class="form-control" formControlName="flashVolume" (blur)="onBlurEvent($event)" />
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Scale loss mm^3</span>
                          <app-info-tooltip [infoId]="'Forging_scale_loss'"></app-info-tooltip>
                        </label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'scaleLoss'"></app-field-comment>
                        <input type="number" class="form-control" readonly="readonly" formControlName="scaleLoss" (blur)="onBlurEvent($event)" />
                      </div>
                    </div>
                  </div>
                  <div class="row" *ngIf="(forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot">
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Material Yield (Utilization)%</span>
                          <app-info-tooltip [infoId]="'Material_Utilisation'"></app-info-tooltip>
                        </label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'yeildUtilization'"></app-field-comment>
                        <input type="number" class="form-control" readonly="readonly" formControlName="yeildUtilization" (blur)="onBlurEvent($event)" />
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Cost of Raw Material for Deployed Weight ($ / part)</span>
                          <app-info-tooltip [infoId]="'Forging_Cost_Of_Raw_Material_For_Deployed_Weight'"></app-info-tooltip>
                        </label>
                        <app-field-comment [formIdentifier]="formIdentifier" class="position-absolute right-top-comment" [fieldIdentifier]="'totalCostOfRawMaterials'"></app-field-comment>
                        <input type="number" class="form-control" readonly="readonly" formControlName="totalCostOfRawMaterials" (blur)="onBlurEvent($event)" />
                      </div>
                    </div>
                    <div class="col-4" *ngIf="forging.hotForgingClosedDieHot && false">
                      <ng-container *ngTemplateOutlet="partSurfaceArea; context: { labelRequired: true }"></ng-container>
                    </div>
                  </div>
                  <div class="row" *ngIf="forging.hotForgingClosedDieHot && false">
                    <div class="col-4" *ngIf="processFlag.IsProcessStockFormRound">
                      <ng-container *ngTemplateOutlet="stockOuterDiameter; context: { labelRequired: true }"></ng-container>
                    </div>
                    <div class="col-4" *ngIf="!processFlag.IsProcessStockFormRound && !processFlag.IsProcessStockFormRectangleBar">
                      <ng-container *ngTemplateOutlet="stockInnerDiameter; context: { labelRequired: true }"></ng-container>
                    </div>
                  </div>
                  <div class="row" *ngIf="forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading">
                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">No of Parts Produced per Coil</span>
                        <app-info-tooltip [infoId]="'Forging_No_of_Parts_Produced_per_Coil'"></app-info-tooltip>
                      </label>
                      <ng-container *ngTemplateOutlet="partsPerCoil; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Coil End Loss Per part (g)</span>
                        <app-info-tooltip [infoId]="'Forging_Coil_End_Loss_Per_Part'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'weldWeightWastage'"></app-field-comment>
                      <input type="number" class="form-control" formControlName="weldWeightWastage" [OnlyNumber]="true" placeholder="weldWeightWastage" (blur)="onBlurEvent($event)" min="0" />
                    </div>
                    <div class="col-4" *ngIf="processFlag.IsProcessColdForgingColdHeading">
                      <label class="form-label no-wrap">Length Of The Raw Material {{ isEnableUnitConversion ? '(' + conversionValue + ')' : '(mm)' }}:</label>
                      <ng-container *ngTemplateOutlet="sheetLength; context: { labelRequired: false }"></ng-container>
                    </div>
                  </div>
                  <div
                    class="row"
                    *ngIf="(forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || this.processFlag.IsProcessColdForgingColdHeading">
                    <div class="col-4" *ngIf="forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Coil End Loss (gm)</span>
                        <app-info-tooltip [infoId]="'Forging_Coil_End_Loss'"></app-info-tooltip>
                      </label>
                      <ng-container *ngTemplateOutlet="unbendPartWeight; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">
                            Cutting Loss Per Part
                            {{ isEnableUnitConversion ? ' (' + conversionValue + '^3)' : ' (mm^3)' }}
                          </span>
                          <app-info-tooltip [infoId]="'Forging_cutting_loss_per_part'"></app-info-tooltip>
                        </label>
                        <input type="number" class="form-control" readonly="readonly" formControlName="cuttingLoss" id="cuttingLoss" />
                      </div>
                    </div>
                    <div class="col-4" *ngIf="(forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">
                            Gross Volume
                            {{ isEnableUnitConversion ? ' (' + conversionValue + '^3)' : ' (mm^3)' }}
                          </span>
                          <app-info-tooltip [infoId]="'Forging_gross_volume'"></app-info-tooltip>
                        </label>
                        <input type="number" class="form-control" readonly="readonly" formControlName="grossVolumne" id="grossVolumne" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="col-12 links-block mt-2" style="justify-content: end">
              <a href="javascript:void(0)" class="link-info" id="aBCmat">Request New Material</a>
            </div> -->
            <div
              class="col-12 mt-3"
              *ngIf="
                !processFlag.IsProcessCasting &&
                !processFlag.IsProcessCableAssembly &&
                !forging.hotForgingClosedDieHot &&
                !forging.hotForgingOpenDieHot &&
                !forging.coldForgingClosedDieHot &&
                !processFlag.IsProcessColdForgingColdHeading &&
                !processFlag.IsProcessCustomizeCable &&
                !processFlag.IsProcessMachining &&
                !processFlag.IsProcessTubeBending &&
                !processFlag.IsProcessInsulationJacket &&
                !processFlag.IsProcessPlasticTubeExtrusion &&
                !processFlag.IsProcessPlasticVacuumForming &&
                !processFlag.IsProcessConventionalPCB &&
                !processFlag.IsProcessTypeInjectionMolding &&
                !processFlag.IsProcessTypeRubberInjectionMolding &&
                !processFlag.IsProcessTypeCompressionMolding &&
                !processFlag.IsProcessTypeTransferMolding &&
                !processFlag.IsProcessTypeBlowMolding &&
                !processFlag.IsProcessThermoForming &&
                !processFlag.IsProcessLaserCutting &&
                !processFlag.IsProcessPlasmaCutting &&
                !processFlag.IsProcessOxyCutting &&
                !processFlag.IsProcessTubeLaserCutting &&
                !processFlag.IsProcessTPP &&
                !processFlag.IsProcessStampingStage &&
                !processFlag.IsProcessStampingProgressive &&
                !processFlag.IsProcessTransferPress &&
                !processFlag.IsProcessMigWelding &&
                !processFlag.IsProcessTigWelding &&
                !processFlag.IsProcessTypeZincPlating &&
                !processFlag.IsProcessTypeChromePlating &&
                !processFlag.IsProcessTypeNickelPlating &&
                !processFlag.IsProcessTypeCopperPlating &&
                !processFlag.IsProcessTypeTinPlating &&
                !processFlag.IsProcessTypeGoldPlating &&
                !processFlag.IsProcessTypeSilverPlating &&
                !processFlag.IsProcessTypeR2RPlating &&
                !processFlag.IsProcessTypeGalvanization &&
                !processFlag.IsProcessTypePowderCoating &&
                !processFlag.IsProcessTypePowderPainting
              ">
              <div class="card" *ngIf="f.matPrimaryProcessName.value !== ''">
                <div class="card-header">Part Details</div>
                <div class="card-body">
                  <div class="row mt-3" *ngIf="processFlag.IsProcessColdForgingColdHeading">
                    <div class="col-4">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Part Outer Diameter (' + conversionValue + ')' : 'Part Outer Diameter(mm)' }}
                      </label>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-valid': costingMaterialInfoform.controls['partOuterDiameter']?.touched && costingMaterialInfoform.controls['partOuterDiameter']?.valid,
                          'input-yellow': costingMaterialInfoform.controls['partOuterDiameter']?.touched && costingMaterialInfoform.controls['partOuterDiameter']?.invalid,
                        }"
                        class="form-control input-sm input-auto"
                        formControlName="partOuterDiameter"
                        placeholder="partOuterDiameter"
                        (blur)="onBlurEvent($event)" />
                    </div>

                    <div class="col-4 position-relative" *ngIf="processFlag.IsProcessStockFormRound">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Part Inner Diameter (' + conversionValue + ')' : 'Part Inner Diameter(mm)' }}
                        </span>
                        <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Length_mm')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <ng-container *ngTemplateOutlet="partLengthField; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4" *ngIf="!processFlag.IsProcessStockFormRound">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Part Inner Diameter (' + conversionValue + ')' : 'Part Inner Diameter(mm)' }}
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'partInnerDiameter'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-valid': costingMaterialInfoform.controls['partInnerDiameter']?.touched && costingMaterialInfoform.controls['partInnerDiameter']?.valid,
                          'input-yellow': costingMaterialInfoform.controls['partInnerDiameter']?.touched && costingMaterialInfoform.controls['partInnerDiameter']?.invalid,
                        }"
                        class="form-control input-auto"
                        formControlName="partInnerDiameter"
                        placeholder="partInnerDiameter"
                        (blur)="onBlurEvent($event)" />
                    </div>
                    <div class="col-4" *ngIf="!processFlag.IsProcessStockFormRound">
                      <label class="form-label no-wrap">{{ isEnableUnitConversion ? 'Part Length (' + conversionValue + ')' : 'Part Length(mm)' }}:</label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'partLength'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-valid': costingMaterialInfoform.controls['partLength']?.touched && costingMaterialInfoform.controls['partLength']?.valid,
                          'input-yellow': costingMaterialInfoform.controls['partLength']?.touched && costingMaterialInfoform.controls['partLength']?.invalid,
                        }"
                        class="form-control input-sm input-auto"
                        formControlName="partLength"
                        placeholder="partLength"
                        (blur)="onBlurEvent($event)" />
                    </div>
                  </div>

                  <div
                    class="row"
                    *ngIf="
                      !processFlag.IsProcessColdForgingColdHeading &&
                      !processFlag.IsProcessMetalTubeExtrusion &&
                      !processFlag.IsProcessTypeWelding &&
                      !processFlag.IsProcessSpotWelding &&
                      !processFlag.IsProcessMetalExtrusion
                    ">
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Part Envelope Length (' + conversionValue + ')' : 'Part Envelope Length(mm)' }}
                        </span>

                        <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Length_mm')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <ng-container *ngTemplateOutlet="partLengthField; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4 position-relative" *ngIf="!processFlag.IsProcessStockFormRound">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Part Envelope Width (' + conversionValue + ')' : 'Part Envelope Width(mm)' }}
                        </span>
                        <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Width_mm')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <ng-container *ngTemplateOutlet="partWidthField; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4 position-relative" *ngIf="!processFlag.IsProcessStockFormRound">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Part Envelope Height (' + conversionValue + ')' : 'Part Envelope Height(mm)' }}
                        </span>
                        <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Height_mm')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <ng-container *ngTemplateOutlet="partHeightField; context: { labelRequired: false }"></ng-container>
                    </div>

                    <div class="col-4" *ngIf="processFlag.IsProcessStockFormRound">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Part Envelope Diameter (' + conversionValue + ')' : 'Part Envelope Diameter (mm)' }}
                        :
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'partOuterDiameter'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-valid': costingMaterialInfoform.controls['partOuterDiameter']?.touched && costingMaterialInfoform.controls['partOuterDiameter']?.valid,
                          'input-yellow': costingMaterialInfoform.controls['partOuterDiameter']?.touched && costingMaterialInfoform.controls['partOuterDiameter']?.invalid,
                        }"
                        class="form-control input-sm input-auto"
                        formControlName="partOuterDiameter"
                        placeholder="partOuterDiameter"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>
                  </div>
                  <div class="row">
                    <div
                      class="col-4 position-relative"
                      *ngIf="
                        currentCommodityId !== 2 &&
                        currentCommodityId !== 5 &&
                        currentCommodityId !== 3 &&
                        currentCommodityId !== 4 &&
                        !processFlag.IsProcessTypeWetPainting &&
                        !processFlag.IsProcessThermoForming &&
                        !processFlag.IsProcessPlasticVacuumForming &&
                        !processFlag.IsProcessTypePowderCoating &&
                        !processFlag.IsProcessTypePowderPainting &&
                        !processFlag.IsProcessCustomizeCable &&
                        !processFlag.IsProcessTypeAssembly &&
                        !processFlag.IsProcessTypeWelding
                      ">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Max.wall thick/Part (' + conversionValue + ')' : 'Max. wall thick/Part(mm)' }}
                        </span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Max_Wall_Thickness')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'maxWallthick'"></app-field-comment>
                      <input type="number" class="form-control" placeholder=" Enter Max. wall thick (mm)" formControlName="maxWallthick" (blur)="onBlurEvent($event)" [OnlyNumber]="true" min="0" />
                    </div>
                    <div
                      class="col-4 position-relative"
                      *ngIf="
                        currentCommodityId !== 2 &&
                        currentCommodityId !== 5 &&
                        currentCommodityId !== 3 &&
                        currentCommodityId !== 4 &&
                        !processFlag.IsProcessTypeWetPainting &&
                        !processFlag.IsProcessThermoForming &&
                        !processFlag.IsProcessPlasticVacuumForming &&
                        !processFlag.IsProcessTypePowderCoating &&
                        !processFlag.IsProcessTypePowderPainting &&
                        !processFlag.IsProcessCustomizeCable &&
                        !processFlag.IsProcessTypeAssembly &&
                        !processFlag.IsProcessTypeWelding
                      ">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Avg.wall thick/Part (' + conversionValue + ')' : 'Avg.wall thick/Part(mm)' }}
                        </span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Avg_Wall_Thickness')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>

                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'wallAverageThickness'"></app-field-comment>
                      <input
                        type="number"
                        class="form-control"
                        placeholder=" Enter Max. wall thick (mm)"
                        formControlName="wallAverageThickness"
                        (blur)="onBlurEvent($event)"
                        [OnlyNumber]="true"
                        min="0" />
                    </div>

                    <div
                      class="col-4 position-relative"
                      *ngIf="
                        currentCommodityId !== 2 &&
                        currentCommodityId !== 5 &&
                        currentCommodityId !== 3 &&
                        currentCommodityId !== 4 &&
                        !processFlag.IsProcessTypeWetPainting &&
                        !processFlag.IsProcessThermoForming &&
                        !processFlag.IsProcessPlasticVacuumForming &&
                        !processFlag.IsProcessTypePowderCoating &&
                        !processFlag.IsProcessTypePowderPainting &&
                        !processFlag.IsProcessCustomizeCable &&
                        !processFlag.IsProcessTypeAssembly &&
                        !processFlag.IsProcessTypeWelding
                      ">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Standard Deviation</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Standard_Deviation')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'standardDeviation'"></app-field-comment>
                      <input
                        type="number"
                        class="form-control"
                        placeholder=" Enter Max. wall thick (mm)"
                        formControlName="standardDeviation"
                        (blur)="onBlurEvent($event)"
                        [OnlyNumber]="true"
                        min="0" />
                    </div>
                  </div>

                  <!--MetalExtrusion Begin-->
                  <app-metal-extrusion-material
                    [formGroup]="formGroups[FormGroupKeysMaterial.MetalExtrusion]"
                    [compVals]="{
                      isEnableUnitConversion,
                      conversionValue,
                      formIdentifier,
                    }"
                    (doCalculateCost)="doCalculateCost($event)"
                    *ngIf="processFlag.IsProcessMetalTubeExtrusion || processFlag.IsProcessMetalExtrusion"></app-metal-extrusion-material>
                  <!--MetalExtrusion End-->

                  <div
                    class="row"
                    *ngIf="
                      processFlag.IsProcessTypePowderCoating ||
                      processFlag.IsProcessTypePowderPainting ||
                      processFlag.IsProcessTypePlating ||
                      processFlag.IsProcessTypeWetPainting ||
                      processFlag.IsProcessTypeGalvanization ||
                      processFlag.IsProcessTypeSiliconCoatingAuto ||
                      processFlag.IsProcessTypeSiliconCoatingSemi
                    ">
                    <div class="col-4 mt-3" *ngIf="processFlag.IsProcessTypeWetPainting || processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi">
                      <label class="form-label no-wrap input-sm">Base Material (Family):</label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'baseMaterialFamily'"></app-field-comment>
                      <select
                        formControlName="baseMaterialFamily"
                        class="form-control"
                        (change)="onMaterialTypeChange($event, 'base')"
                        placeholder="Select Material Family"
                        id="baseMaterialtype"
                        [ngClass]="{
                          'input-mandatory': f.baseMaterialFamily.errors,
                          'input-valid': f.baseMaterialFamily.valid && !f.baseMaterialFamily.dirty,
                          'input-overridden': f.baseMaterialFamily.dirty && f.baseMaterialFamily.touched,
                        }">
                        <option value="" selected>----Select Material Family -----</option>
                        <option *ngFor="let materialtypedata of baseMaterialTypeList" value="{{ materialtypedata.materialTypeId }}">
                          {{ materialtypedata.materialTypeName }}
                        </option>
                      </select>
                    </div>

                    <div class="col-4 mt-3" *ngIf="processFlag.IsProcessTypeWetPainting || processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi">
                      <label class="form-label no-wrap">Base Material (Grade):</label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'baseMaterialDescription'"></app-field-comment>
                      <select
                        formControlName="baseMaterialDescription"
                        class="form-control"
                        (change)="onMaterialDescChange($event, 'base')"
                        [ngClass]="{
                          'input-mandatory': f.baseMaterialDescription.errors,
                          'input-valid': f.baseMaterialDescription.valid && !f.baseMaterialDescription.dirty,
                          'input-overridden': f.baseMaterialDescription.dirty && f.baseMaterialDescription.touched,
                        }">
                        <option value="" selected>----Select Description -----</option>
                        <option *ngFor="let material of baseMaterialDescriptionList" value="{{ material.materialMasterId }}">
                          {{ material.materialDescription }}
                        </option>
                      </select>
                    </div>

                    <div
                      class="col-4 position-relative"
                      *ngIf="
                        processFlag.IsProcessTypePlating ||
                        processFlag.IsProcessTypeWetPainting ||
                        processFlag.IsProcessTypeSiliconCoatingAuto ||
                        processFlag.IsProcessTypeSiliconCoatingSemi ||
                        processFlag.IsProcessTypeGalvanization
                      ">
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypePlating || processFlag.IsProcessTypeGalvanization">
                        Part Thickness ({{ isEnableUnitConversion ? conversionValue : 'mm' }}):
                      </label>
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeWetPainting || processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi">
                        Base Material Thickness ({{ isEnableUnitConversion ? conversionValue : 'mm' }}):
                      </label>
                      <ng-container *ngTemplateOutlet="partThickness; context: { labelRequired: false }"></ng-container>
                    </div>

                    <div class="col-4 mt-3 position-relative" *ngIf="processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi">
                      <label class="form-label no-wrap">No. of Faces to be Coated:</label>
                      <ng-container *ngTemplateOutlet="noOfCavities; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4 mt-3">
                      <label class="form-label no-wrap">
                        {{
                          processFlag.IsProcessTypePlating
                            ? 'Plating '
                            : processFlag.IsProcessTypeWetPainting || processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi
                              ? 'Painting/Coating'
                              : processFlag.IsProcessTypeGalvanization
                                ? 'Passivated'
                                : 'Painting'
                        }}
                        {{ isEnableUnitConversion ? ' Surface Area (' + conversionValue + '^2)' : ' Area (mm^2)' }}
                        :
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'paintArea'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.length.errors,
                          'input-valid': f.paintArea.valid && !f.paintArea.dirty,
                          'input-overridden': f.paintArea.dirty && f.paintArea.touched,
                        }"
                        class="form-control"
                        formControlName="paintArea"
                        [OnlyNumber]="true"
                        placeholder="Paint Area"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>

                    <!-- <div class="col-4" *ngIf="processFlag.IsProcessTypeGalvanization"></div> -->

                    <div
                      class="col-4"
                      *ngIf="processFlag.IsProcessTypePlating || processFlag.IsProcessTypePowderCoating || processFlag.IsProcessTypeWetPainting || processFlag.IsProcessTypePowderPainting">
                      <!-- ||processFlag.IsProcessTypeGalvanization -->
                      <ng-container *ngTemplateOutlet="partVolume; context: { labelRequired: true }"></ng-container>
                    </div>

                    <div class="col-4 mt-3" *ngIf="processFlag.IsProcessTypeWetPainting || processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi">
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeWetPainting">Primer Painting Thickness (m):</label>
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi">Painting/Coating Thickness (m):</label>
                      <ng-container *ngTemplateOutlet="paintCoatingTickness; context: { labelRequired: false }"></ng-container>
                    </div>

                    <!-- <div class="col-4 position-relative" *ngIf="IsProcessTypeWetPainting">
              <label class="form-label no-wrap">Primer Painting Area
                {{ isEnableUnitConversion ? ' ('+ conversionValue + '^2)' : ' (mm^2)' }}:
              </label>
              <ng-container *ngTemplateOutlet="partProjectArea;context:{labelRequired:false}"></ng-container>
            </div> -->

                    <!-- <div class="col-4" *ngIf="IsProcessTypeWetPainting">
              <label class="form-label no-wrap"> Primer Painting Thickness (m): </label>
              <app-field-comment [formIdentifier]="formIdentifier"
                [fieldIdentifier]="'primerCoatingTickness'"></app-field-comment>
              <input type="number"
                [ngClass]="{'input-mandatory':f.primerCoatingTickness.errors,'input-valid': f.primerCoatingTickness.valid && !f.primerCoatingTickness.dirty, 'input-overridden': f.primerCoatingTickness.dirty && f.primerCoatingTickness.touched}"
                class="form-control" formControlName="primerCoatingTickness" [OnlyNumber]="true"
                placeholder="PrimerCoatingTickness" (blur)="onBlurEvent($event)" min="0" />
            </div> -->

                    <!-- <div class="col-4" *ngIf="IsProcessTypePlating">
              <label class="form-label no-wrap">Barrel Volume Utilisation %:</label>
              <app-field-comment [formIdentifier]="formIdentifier"
                [fieldIdentifier]="'percentageOfReduction'"></app-field-comment>
              <input type="number" class="form-control" formControlName="percentageOfReduction"
                (blur)="onBlurEvent($event)" />
            </div>

            <div class="col-4" *ngIf="IsProcessTypePlating">
              <label class="form-label no-wrap">Parts Per Cycle(Nos):</label>
              <app-field-comment [formIdentifier]="formIdentifier"
                [fieldIdentifier]="'partsPerCoil'"></app-field-comment>
              <input type="number" class="form-control" formControlName="partsPerCoil" (blur)="onBlurEvent($event)" />
            </div> -->
                  </div>

                  <div class="row mt-3" *ngIf="processFlag.IsProcessStampingProgressive || processFlag.IsProcessStampingStage || processFlag.IsProcessTransferPress">
                    <div class="col-4">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Unfolded Length (' + conversionValue + ')' : 'Unfolded Length (mm)' }}
                        :
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'unfoldedLength'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.unfoldedLength.errors,
                          'input-valid': f.unfoldedLength.valid && !f.unfoldedLength.dirty,
                          'input-overridden': f.unfoldedLength.dirty && f.unfoldedLength.touched,
                        }"
                        class="form-control"
                        formControlName="unfoldedLength"
                        [OnlyNumber]="true"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>
                    <div class="col-4">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Unfolded Width(' + conversionValue + ')' : 'Unfolded Width (mm)' }}
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'unfoldedWidth'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.unfoldedWidth.errors,
                          'input-valid': f.unfoldedWidth.valid && !f.unfoldedWidth.dirty,
                          'input-overridden': f.unfoldedWidth.dirty && f.unfoldedWidth.touched,
                        }"
                        class="form-control"
                        formControlName="unfoldedWidth"
                        [OnlyNumber]="true"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>
                    <div class="col-4">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Thickness (' + conversionValue + ')' : 'Thickness (mm)' }}
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'thickness'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.thickness.errors,
                          'input-valid': f.thickness.valid && !f.thickness.dirty,
                          'input-overridden': f.thickness.dirty && f.thickness.touched,
                        }"
                        class="form-control"
                        formControlName="thickness"
                        [OnlyNumber]="true"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>
                    <div class="col-4">
                      <a href="javascript:void(0)" class="link-info" (click)="viewUnfoldedPart()">View Unfolded Part</a>
                      <a href="javascript:void(0)" class="ms-1 link-info" (click)="viewNestingAlgo()">View Nesting</a>
                      <a href="javascript:void(0)" class="ms-1 link-info" (click)="viewNestingAlgoNew()">- View Nesting New</a>
                    </div>
                  </div>

                  <div class="row mt-3" *ngIf="processFlag.IsProcessStampingProgressive || processFlag.IsProcessStampingStage || processFlag.IsProcessTransferPress">
                    <div class="col-4">
                      <label class="form-label no-wrap">
                        {{
                          processFlag?.IsProcessTransferPress
                            ? isEnableUnitConversion
                              ? 'Coil Length (' + conversionValue + ')'
                              : 'Coil Length (mm)'
                            : isEnableUnitConversion
                              ? 'Sheet/Coil Length (' + conversionValue + ')'
                              : 'Sheet/Coil Length (mm)'
                        }}
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'coilLength'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.coilLength.errors,
                          'input-valid': f.coilLength.valid && !f.coilLength.dirty,
                          'input-overridden': f.coilLength.dirty && f.coilLength.touched,
                        }"
                        class="form-control"
                        (blur)="onBlurEvent($event)"
                        placeholder="Enter Sheet Length (mm)"
                        formControlName="coilLength" />
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap">
                        {{
                          processFlag?.IsProcessTransferPress
                            ? isEnableUnitConversion
                              ? 'Coil Width (' + conversionValue + ')'
                              : 'Coil Width (mm)'
                            : isEnableUnitConversion
                              ? 'Sheet/Coil Width (' + conversionValue + ')'
                              : 'Sheet/Coil Width (mm)'
                        }}
                      </label>

                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'coilWidth'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.coilWidth.errors,
                          'input-valid': f.coilWidth.valid && !f.coilWidth.dirty,
                          'input-overridden': f.coilWidth.dirty && f.coilWidth.touched,
                        }"
                        class="form-control"
                        (blur)="validateUnfoldLength($event)"
                        placeholder="Enter Sheet Width (mm)"
                        formControlName="coilWidth" />
                    </div>

                    <div class="col-4 position-relative" *ngIf="!processFlag.IsProcessStampingStage && !processFlag.IsProcessStampingProgressive && !processFlag.IsProcessTransferPress">
                      <label class="form-label">
                        {{ isEnableUnitConversion ? 'Parts per Sheet/Coil (' + conversionValue + ')' : 'Parts per Sheet/Coil(mm)' }}
                      </label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'partsPerCoil'"></app-field-comment>
                      <input type="number" class="form-control" placeholder="Enter Parts per Sheet (mm)" formControlName="partsPerCoil" (blur)="onBlurEvent($event)" />
                    </div>
                    <div class="col-md-4" *ngIf="processFlag.IsProcessStampingStage || processFlag.IsProcessStampingProgressive || processFlag.IsProcessTransferPress">
                      <label class="form-label">
                        {{ isEnableUnitConversion ? 'Start & End Scrap Length (' + conversionValue + ')' : 'Start & End Scrap Length(mm)' }}
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'enterStartEndScrapLength'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-failure': !f.enterStartEndScrapLength.errors,
                          'input-success': f.enterStartEndScrapLength.errors,
                        }"
                        class="form-control"
                        (blur)="onBlurEvent($event)"
                        formControlName="enterStartEndScrapLength" />
                    </div>
                  </div>

                  <div class="row mt-3" *ngIf="processFlag.IsProcessColdForgingColdHeading && !processFlag.IsProcessStockFormRound">
                    <div class="col-4">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Coil Length (' + conversionValue + ')' : 'Coil Length(mm)' }}
                        :
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'coilLength'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-yellow': !f.coilLength.errors,
                          'input-valid': costingMaterialInfoform.controls['coilLength']?.touched && costingMaterialInfoform.controls['coilLength']?.valid,
                          'input-mandatory': costingMaterialInfoform.controls['coilLength']?.touched && costingMaterialInfoform.controls['coilLength']?.invalid,
                        }"
                        class="form-control"
                        placeholder="Enter Coil Length (mm)"
                        (blur)="onBlurEvent($event)"
                        formControlName="coilLength"
                        value="300000" />
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Coil Diameter (' + conversionValue + ')' : 'Coil Diameter(mm)' }}
                        :
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'coilDiameter'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-yellow': !f.coilDiameter.errors,
                          'input-valid': costingMaterialInfoform.controls['coilDiameter']?.touched && costingMaterialInfoform.controls['coilDiameter']?.valid,
                          'input-mandatory': costingMaterialInfoform.controls['coilDiameter']?.touched && costingMaterialInfoform.controls['coilDiameter']?.invalid,
                        }"
                        class="form-control"
                        placeholder="Enter Sheet Width (mm)"
                        formControlName="coilDiameter"
                        (blur)="onBlurEvent($event)" />
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Start & End Scrap Length (' + conversionValue + ')' : 'Start & End Scrap Length(mm)' }}
                        :
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'enterStartEndScrapLength'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-yellow': !f.enterStartEndScrapLength.errors,
                          'input-valid': costingMaterialInfoform.controls['enterStartEndScrapLength']?.touched && costingMaterialInfoform.controls['enterStartEndScrapLength']?.valid,
                          'input-mandatory': costingMaterialInfoform.controls['enterStartEndScrapLength']?.touched && costingMaterialInfoform.controls['enterStartEndScrapLength']?.invalid,
                        }"
                        class="form-control"
                        placeholder="Start and End scrap length"
                        formControlName="enterStartEndScrapLength"
                        (blur)="onBlurEvent($event)" />
                    </div>
                  </div>

                  <div
                    class="row mt-2"
                    *ngIf="processFlag.IsProcessTypeRubberExtrusion || processFlag.IsProcessTypeBlowMolding || processFlag.IsProcessThermoForming || processFlag.IsProcessPlasticVacuumForming">
                    <div class="col-4 position-relative">
                      <ng-container *ngTemplateOutlet="partProjectArea; context: { labelRequired: true }"></ng-container>
                    </div>

                    <div
                      class="col-4"
                      *ngIf="
                        (processFlag.IsProcessTypeAssembly || !(processFlag.IsProcessTypeWelding && processFlag.IsProcessSpotWelding)) &&
                        !processFlag.IsProcessTypePlating &&
                        !processFlag.IsProcessMetalTubeExtrusion &&
                        !processFlag.IsProcessMetalExtrusion
                      ">
                      <ng-container *ngTemplateOutlet="partSurfaceArea; context: { labelRequired: true }"></ng-container>
                    </div>
                    <div
                      class="col-4 position-relative"
                      *ngIf="
                        processFlag.IsProcessTypeInjectionMolding ||
                        processFlag.IsProcessTypeRubberExtrusion ||
                        processFlag.IsProcessTypeBlowMolding ||
                        processFlag.IsProcessThermoForming ||
                        processFlag.IsProcessPlasticVacuumForming ||
                        processFlag.IsProcessTypeRubberInjectionMolding
                      ">
                      <ng-container *ngTemplateOutlet="partVolume; context: { labelRequired: true }"></ng-container>
                    </div>
                  </div>

                  <div class="row mt-2" *ngIf="processFlag.IsProcessThermoForming || processFlag.IsProcessPlasticVacuumForming">
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Average Thickness (' + conversionValue + ')' : 'Average Thickness (mm)' }}
                      </label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'wallAverageThickness'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.wallAverageThickness.errors,
                          'input-valid': f.wallAverageThickness.valid && !f.wallAverageThickness.dirty,
                          'input-overridden': f.wallAverageThickness.dirty && f.wallAverageThickness.touched,
                        }"
                        class="form-control"
                        placeholder="Enter Average Thickness"
                        [OnlyNumber]="true"
                        formControlName="wallAverageThickness"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>
                    <div class="col-4 position-relative">
                      <ng-container *ngTemplateOutlet="partProjectArea; context: { labelRequired: true }"></ng-container>
                    </div>
                  </div>

                  <!-- <div class="row mt-2" *ngIf="processFlag.IsProcessThermoForming">
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap">Sheet Length(mm):</label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'sheetLength'"></app-field-comment>
                      <input type="number" class="form-control" formControlName="sheetLength" (blur)="onBlurEvent($event)" />
                    </div>
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap">Sheet Width (mm):</label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'sheetWidth'"></app-field-comment>
                      <input type="number" class="form-control" formControlName="sheetWidth" (blur)="onBlurEvent($event)" />
                    </div>
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap">Sheet Thickness(mm):</label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'sheetThickness'"></app-field-comment>
                      <input type="number" class="form-control" formControlName="sheetThickness" (blur)="onBlurEvent($event)" />
                    </div>
                  </div> -->

                  <div class="row">
                    <!-- <div class="col-4 mt-3" *ngIf="processFlag.IsProcessTypeGalvanization">
                      <label class="form-label no-wrap">Coating Grade:</label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'typeOfMaterialBase'"></app-field-comment>
                      <select formControlName="typeOfMaterialBase" class="form-control" (change)="calculateCost('typeOfMaterialBase')">
                        <option value="0" selected>Select Coating Grade</option>
                        <option *ngFor="let option of coatingGrade" [value]="option.id">
                          {{ option.grade }}
                        </option>
                      </select>
                    </div> -->

                    <div class="col-4" *ngIf="processFlag.IsProcessTypePlating || processFlag.IsProcessTypePowderCoating || processFlag.IsProcessTypePowderPainting">
                      <!-- || processFlag.IsProcessTypeGalvanization -->
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypePlating">Plating Thickness (m):</label>
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypePowderCoating || processFlag.IsProcessTypePowderPainting">Painting Thickness (m):</label>
                      <!-- <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeGalvanization">Coating Thickness (m):</label> -->
                      <ng-container *ngTemplateOutlet="paintCoatingTickness; context: { labelRequired: false }"></ng-container>
                    </div>

                    <div class="col-4" *ngIf="processFlag.IsProcessTypeWetPainting">
                      <ng-container *ngTemplateOutlet="percentageOfReduction; context: { labelRequired: true }"></ng-container>
                    </div>
                    <div
                      class="col-4"
                      *ngIf="
                        !processFlag.IsProcessTypeWireCuttingTermination &&
                        !processFlag.IsProcessMetalTubeExtrusion &&
                        !processFlag.IsProcessMetalExtrusion &&
                        !(processFlag.IsProcessTypeWelding && processFlag.IsProcessSpotWelding)
                      ">
                      <label
                        class="form-label no-wrap"
                        *ngIf="(forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading">
                        Forged Weight (Net) per part (g)
                      </label>
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypePlating">Weight of Plating (g):</label>
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeGalvanization || processFlag.IsProcessTypeWelding">Part Net Weight (g):</label>
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeWetPainting">Weight of Primer Required (g):</label>
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi">Weight of Primer/Silicon Required (g)</label>
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypePowderCoating || processFlag.IsProcessTypePowderPainting">Weight of Paint Required (g):</label>
                      <label
                        class="form-label no-wrap has-icon"
                        *ngIf="
                          !(forging.hotForgingClosedDieHot || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading) &&
                          !processFlag.IsProcessTypeWelding &&
                          !processFlag.IsProcessTypePlating &&
                          !processFlag.IsProcessTypeWetPainting &&
                          !processFlag.IsProcessTypePowderCoating &&
                          !processFlag.IsProcessTypePowderPainting &&
                          !processFlag.IsProcessTypeGalvanization &&
                          !processFlag.IsProcessTypeSiliconCoatingAuto &&
                          !processFlag.IsProcessTypeSiliconCoatingSemi
                        ">
                        <span class="label-text">Part Net Weight (g)</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Part_Net_Weight')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <ng-container *ngTemplateOutlet="netWeight; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div
                      class="col-4"
                      *ngIf="
                        !processFlag.IsProcessNoBakeCasting &&
                        !processFlag.IsProcessTypeWireCuttingTermination &&
                        !processFlag.IsProcessTypeAssembly &&
                        !processFlag.IsProcessMetalTubeExtrusion &&
                        !processFlag.IsProcessMetalExtrusion &&
                        !processFlag.IsProcessTypeWelding &&
                        !processFlag.IsProcessTransferPress
                      ">
                      <ng-container *ngTemplateOutlet="utilisation; context: { labelRequired: true }"></ng-container>
                    </div>

                    <div class="col-4" *ngIf="!(processFlag.IsProcessTypeAssembly || processFlag.IsProcessTypeWelding)">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          No. of
                          {{ currentCommodityId === 2 ? 'Impressions' : 'Cavities' }}
                        </span>
                        <app-info-tooltip [infoId]="currentCommodityId === 2 ? 'Number_Of_Impressions' : 'No_Of_Cavities'"></app-info-tooltip>
                      </label>
                      <ng-container *ngTemplateOutlet="noOfCavities; context: { labelRequired: false }"></ng-container>
                    </div>

                    <div class="col-4" *ngIf="!(processFlag.IsProcessTypeAssembly || processFlag.IsProcessTypeWelding)">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">No. of Inserts/Part:</span>
                        <app-info-tooltip [infoId]="'Number_Of_Inserts'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'noOfInserts'"></app-field-comment>
                      <input
                        type="number"
                        [ngClass]="{
                          'input-mandatory': f.noOfInserts.errors,
                          'input-valid': f.noOfInserts.valid && !f.noOfInserts.dirty,
                          'input-overridden': f.noOfInserts.dirty && f.noOfInserts.touched,
                        }"
                        class="form-control"
                        formControlName="noOfInserts"
                        [OnlyNumber]="true"
                        (blur)="onBlurEvent($event)"
                        min="0" />
                    </div>

                    <div class="col-4" *ngIf="processFlag.IsProcessThermoForming || processFlag.IsProcessPlasticVacuumForming">
                      <ng-container *ngTemplateOutlet="noOfCavities; context: { labelRequired: true }"></ng-container>
                    </div>

                    <div
                      class="col-4"
                      *ngIf="
                        processFlag.IsProcessTypePlating ||
                        processFlag.IsProcessTypeWetPainting ||
                        processFlag.IsProcessTypePowderCoating ||
                        processFlag.IsProcessTypePowderPainting ||
                        processFlag.IsProcessTypeSiliconCoatingAuto ||
                        processFlag.IsProcessTypeSiliconCoatingSemi
                      ">
                      <!-- processFlag.IsProcessTypeGalvanization || -->
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypePlating">Plating Weight with Losses (g):</label>
                      <!-- <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeGalvanization">Coating Weight with Losses (g):</label> -->
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypeWetPainting || processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi">
                        Weight with Losses (g)
                      </label>
                      <label class="form-label no-wrap" *ngIf="processFlag.IsProcessTypePowderCoating || processFlag.IsProcessTypePowderPainting">Powder Paint Weight with Losses (g):</label>
                      <ng-container *ngTemplateOutlet="grossWeight; context: { labelRequired: false }"></ng-container>
                    </div>

                    <div
                      class="col-4"
                      [ngClass]="{
                        'offset-8': processFlag.IsProcessTypeSiliconCoatingAuto || processFlag.IsProcessTypeSiliconCoatingSemi,
                        'offset-4': processFlag.IsProcessTypePlating || processFlag.IsProcessTypeWetPainting || processFlag.IsProcessTypeGalvanization,
                      }"
                      *ngIf="
                        processFlag.IsProcessTypeWiringHarness ||
                        processFlag.IsProcessTypePlating ||
                        processFlag.IsProcessTypeWetPainting ||
                        processFlag.IsProcessTypePowderCoating ||
                        processFlag.IsProcessTypePowderPainting ||
                        processFlag.IsProcessTypeSiliconCoatingAuto ||
                        processFlag.IsProcessTypeSiliconCoatingSemi ||
                        processFlag.IsProcessTypeGalvanization
                      ">
                      <ng-container *ngTemplateOutlet="netMaterialCost; context: { labelRequired: true }"></ng-container>
                    </div>
                  </div>
                </div>

                <div class="row mt-3" *ngIf="forging.hotForgingClosedDieHot && false">
                  <div class="col-4 position-relative">
                    <label class="form-label no-wrap">Unbend Part Weight(gms):</label>
                    <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'unbendPartWeight'"></app-field-comment>
                    <input type="number" class="form-control" formControlName="unbendPartWeight" (blur)="onBlurEvent($event)" [OnlyNumber]="true" />
                  </div>
                </div>
                <!-- Wire cutting termination  -->
                <div class="row mt-3" *ngIf="processFlag.IsProcessTypeWireCuttingTermination">
                  <div class="col-4">
                    <label class="form-label no-wrap">
                      {{ isEnableUnitConversion ? 'Unbent length of terminal (' + conversionValue + ')' : 'Unbent length of terminal (mm)' }}
                      :
                    </label>
                    <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'unfoldedLength'"></app-field-comment>
                    <input
                      type="number"
                      [ngClass]="{
                        'input-mandatory': f.unfoldedLength.errors,
                        'input-valid': f.unfoldedLength.valid,
                      }"
                      class="form-control"
                      formControlName="unfoldedLength"
                      [OnlyNumber]="true"
                      (blur)="onBlurEvent($event)"
                      min="0" />
                  </div>
                  <div class="col-4">
                    <label class="form-label no-wrap">
                      {{ isEnableUnitConversion ? 'Coil Length (' + conversionValue + ')' : 'Coil Length(mm)' }}
                      :
                    </label>
                    <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'coilLength'"></app-field-comment>
                    <input
                      type="number"
                      [ngClass]="{
                        'input-yellow': !f.coilLength.errors,
                        'input-valid': costingMaterialInfoform.controls['coilLength']?.touched && costingMaterialInfoform.controls['coilLength']?.valid,
                        'input-mandatory': costingMaterialInfoform.controls['coilLength']?.touched && costingMaterialInfoform.controls['coilLength']?.invalid,
                      }"
                      class="form-control"
                      placeholder="Enter Coil Length (mm)"
                      (blur)="onBlurEvent($event)"
                      formControlName="coilLength"
                      value="300000" />
                  </div>
                  <div class="col-4 position-relative">
                    <label class="form-label no-wrap">
                      {{ isEnableUnitConversion ? 'Thickness of wire (' + conversionValue + ')' : 'Thickness of wire(mm)' }}
                      :
                    </label>
                    <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'sheetThickness'"></app-field-comment>
                    <input type="number" class="form-control" formControlName="sheetThickness" (blur)="onBlurEvent($event)" />
                  </div>
                </div>
                <div class="row mt-3" *ngIf="processFlag.IsProcessTypeWireCuttingTermination">
                  <div class="col-4">
                    <label class="form-label no-wrap">
                      {{
                        (forging.hotForgingClosedDieHot && false) || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot || processFlag.IsProcessColdForgingColdHeading
                          ? 'Forged Weight (Net) per part (g)'
                          : processFlag.IsProcessTypeChromePlating
                            ? 'Minimum layer weight of coating'
                            : 'Net Weight (g)'
                      }}
                    </label>
                    <ng-container *ngTemplateOutlet="netWeight; context: { labelRequired: false }"></ng-container>
                  </div>
                  <div class="col-4 position-relative">
                    <label class="form-label no-wrap">
                      {{ isEnableUnitConversion ? ' Area of Cross-section of Wire (' + conversionValue + '^2)' : 'Area of Cross-section of Wire(mm^2)' }}
                    </label>
                    <ng-container *ngTemplateOutlet="partProjectArea; context: { labelRequired: false }"></ng-container>
                  </div>
                  <div
                    class="col-4 position-relative"
                    *ngIf="
                      processFlag.IsProcessTypeInjectionMolding ||
                      processFlag.IsProcessTypeRubberInjectionMolding ||
                      processFlag.IsProcessTypeWireCuttingTermination ||
                      processFlag.IsProcessTypeRubberExtrusion ||
                      processFlag.IsProcessTypeBlowMolding ||
                      processFlag.IsProcessThermoForming ||
                      processFlag.IsProcessPlasticVacuumForming
                    ">
                    <ng-container *ngTemplateOutlet="partVolume; context: { labelRequired: true }"></ng-container>
                  </div>
                </div>

                <div class="row mt-3" *ngIf="processFlag.IsProcessTypeWireCuttingTermination">
                  <div class="col-4">
                    <label class="form-label no-wrap">No of parts manufactured from one coil:</label>
                    <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'partsPerCoil'"></app-field-comment>
                    <input type="number" class="form-control" formControlName="partsPerCoil" (blur)="onBlurEvent($event)" />
                  </div>
                </div>
                <div class="row mt-3" *ngIf="processFlag.IsProcessTypeWireCuttingTermination">
                  <div class="col-4">
                    <label class="form-label no-wrap">
                      Pitch For Wire Cutting
                      {{ isEnableUnitConversion ? '(' + conversionValue + ')' : '(mm)' }}
                      :
                    </label>
                    <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'pitchForWireCutting'"></app-field-comment>
                    <input type="number" class="form-control" formControlName="pitchForWireCutting" (blur)="onBlurEvent($event)" />
                  </div>
                  <div class="col-4" *ngIf="processFlag.IsProcessTypeWiringHarness || processFlag.IsProcessTypeWireCuttingTermination">
                    <ng-container *ngTemplateOutlet="netMaterialCost; context: { labelRequired: true }"></ng-container>
                  </div>
                </div>
                <!--End Wire cutting termination  -->
                <!-- </div> -->

                <div class="row" *ngIf="processFlag.IsProcessTypeWelding">
                  <div class="col-4">
                    <label class="form-label no-wrap">Weld Base Material :</label>
                    <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'typeOfMaterialBase'"></app-field-comment>
                    <select formControlName="typeOfMaterialBase" class="form-control" (change)="onBlurEvent($event)">
                      <option value="" selected>-------Select Type Of Weld--------</option>
                      <option *ngFor="let option of typeOfMaterialBase" [value]="option.id">
                        {{ option.name }}
                      </option>
                    </select>
                  </div>

                  <div class="col-4 position-relative">
                    <label class="form-label no-wrap">Weld Base Material Thickness (mm):</label>
                    <ng-container *ngTemplateOutlet="partThickness; context: { labelRequired: false }"></ng-container>
                  </div>

                  <div class="col-4 mt-3">
                    <label class="form-label no-wrap" *ngIf="processFlag.IsProcessSpotWelding">Tong size (in)</label>
                    <label class="form-label no-wrap" *ngIf="!processFlag.IsProcessSpotWelding">{{ isEnableUnitConversion ? 'Wire Dia (' + conversionValue + ')' : 'Wire Dia(mm)' }}:</label>
                    <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'wireDiameter'"></app-field-comment>
                    <input
                      type="number"
                      [ngClass]="{
                        'input-valid': costingMaterialInfoform.controls['wireDiameter']?.touched && costingMaterialInfoform.controls['wireDiameter']?.valid,
                        'input-yellow': costingMaterialInfoform.controls['wireDiameter']?.touched && costingMaterialInfoform.controls['wireDiameter']?.invalid,
                      }"
                      class="form-control input-sm input-auto"
                      formControlName="wireDiameter"
                      placeholder="wireDiameter"
                      (blur)="calculateCost('wireDiameter')" />
                  </div>
                </div>
                <ng-container *ngIf="processFlag.IsProcessTypeWelding && !processFlag.IsProcessSpotWelding">
                  <hr />
                  <div class="row">
                    <div class="col-4">
                      <label class="form-label no-wrap">Weld Type :</label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'typeOfWeld'"></app-field-comment>
                      <select formControlName="typeOfWeld" class="form-control" (change)="onBlurEvent($event)">
                        <option value="" selected>-------Select Type Of Weld--------</option>
                        <option *ngFor="let option of typeOfWeldList" [value]="option.id">
                          {{ option.name }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">{{ isEnableUnitConversion ? 'Welding Length (' + conversionValue + ')' : 'Welding Length (mm)' }}</span>

                        <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Length_mm')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <ng-container *ngTemplateOutlet="partLengthField; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Welding Width (' + conversionValue + ')' : 'Welding Width (mm)' }}
                          :
                        </span>
                        <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Width_mm')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                        :
                      </label>
                      <ng-container *ngTemplateOutlet="partWidthField; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Welding Height (' + conversionValue + ')' : 'Welding Height (mm)' }}
                        </span>
                        <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Height_mm')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <ng-container *ngTemplateOutlet="partHeightField; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap">
                        {{ isEnableUnitConversion ? 'Total Weld Volume : (' + conversionValue + '^3)' : ' Total Weld Volume(mm^3)' }}
                      </label>
                      <ng-container *ngTemplateOutlet="partVolume; context: { labelRequired: false }"></ng-container>
                    </div>
                    <div class="col-4">
                      <ng-container *ngTemplateOutlet="density; context: { labelRequired: true }"></ng-container>
                    </div>
                    <div class="col-4">
                      <label class="form-label no-wrap">Weld Material Weight (g):</label>
                      <ng-container *ngTemplateOutlet="grossWeight; context: { labelRequired: false }"></ng-container>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-4">
                      <label class="form-label no-wrap">Efficiency% :</label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'effeciency'"></app-field-comment>
                      <input type="number" class="form-control" formControlName="effeciency" [OnlyNumber]="true" placeholder="effeciency" (blur)="onBlurEvent($event)" min="0" />
                    </div>
                    <div class="col-4 position-relative">
                      <label class="form-label no-wrap">Weld Bead Weight With Wastage (g):</label>
                      <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'weldWeightWastage'"></app-field-comment>
                      <input type="number" class="form-control" formControlName="weldWeightWastage" [OnlyNumber]="true" placeholder="WeldWeightWastage" (blur)="onBlurEvent($event)" min="0" />
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap">{{ processFlag.IsProcessTypeWelding ? 'Weld Wire Cost' : 'Net Material cost' }}($) :</label>
                      <ng-container *ngTemplateOutlet="netMaterialCost; context: { labelRequired: false }"></ng-container>
                    </div>
                  </div>
                  <!-- </div> -->
                </ng-container>
              </div>
            </div>
            <app-machining-material
              [formGroup]="formGroups[FormGroupKeysMaterial.Machining]"
              [compVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                machining,
                isMaterialDetailsDisplay,
              }"
              (doCalculateCost)="doCalculateCost($event)"
              *ngIf="processFlag.IsProcessMachining"></app-machining-material>

            <app-tube-bending
              [formGroup]="formGroups[FormGroupKeysMaterial.TubeBending]"
              [compVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                isMaterialDetailsDisplay,
              }"
              (doCalculateCost)="doCalculateCost($event)"
              *ngIf="processFlag.IsProcessTubeBending"></app-tube-bending>

            <app-insulation-jacket
              [formGroup]="formGroups[FormGroupKeysMaterial.InsulationJacket]"
              [compVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                isMaterialDetailsDisplay,
              }"
              (doCalculateCost)="doCalculateCost($event)"
              *ngIf="processFlag.IsProcessInsulationJacket"></app-insulation-jacket>

            <!-- <app-brazing-material [formGroup]="brazingMaterialFormGroup"
      [compVals]="{isEnableUnitConversion, conversionValue, formIdentifier, isMaterialDetailsDisplay}"
      (doCalculateCost)="doCalculateCost($event)" *ngIf="processFlag.IsProcessBrazing"></app-brazing-material> -->

            <app-plastic-tube-extrusion
              [formGroup]="formGroups[FormGroupKeysMaterial.PlasticTubeExtrusion]"
              [compVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                isMaterialDetailsDisplay,
                processFlag,
              }"
              (doCalculateCost)="doCalculateCost($event)"
              *ngIf="processFlag.IsProcessPlasticTubeExtrusion"></app-plastic-tube-extrusion>

            <!-- <app-plastic-vacuum-forming
              [formGroup]="formGroups[FormGroupKeysMaterial.PlasticVacuumForming]"
              [compVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                isMaterialDetailsDisplay,
                processFlag,
              }"
              (doCalculateCost)="doCalculateCost($event)"
              *ngIf="processFlag.IsProcessPlasticVacuumForming"></app-plastic-vacuum-forming> -->

            <app-hot-forging-closed-die-hot
              [formGroup]="formGroups[FormGroupKeysMaterial.HotForgingClosedDieHot]"
              [compVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                isMaterialDetailsDisplay,
                processFlag,
              }"
              (doCalculateCost)="doCalculateCost($event)"
              *ngIf="forging.hotForgingClosedDieHot"></app-hot-forging-closed-die-hot>

            <app-injection-molding-material
              [formGroup]="formGroups[FormGroupKeysMaterial.InjectionMolding]"
              [defaultValues]="defaultValues"
              [injecMoldingVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                showMasterBatchSection,
                processFlag,
              }"
              (doCalculateCost)="doCalculateCost($event)"
              (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
              *ngIf="processFlag.IsProcessTypeInjectionMolding || processFlag.IsProcessTypeRubberInjectionMolding"></app-injection-molding-material>

            <app-compression-molding-material
              [formGroup]="formGroups[FormGroupKeysMaterial.CompressionMolding]"
              [compressionMoldingVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                processFlag,
              }"
              [tab]="tab"
              [selectedMaterialDetails]="selectedMaterialDetails"
              (doCalculateCost)="doCalculateCost($event)"
              (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
              *ngIf="
                processFlag.IsProcessTypeCompressionMolding ||
                processFlag.IsProcessTypeBlowMolding ||
                processFlag.IsProcessTypeTransferMolding ||
                processFlag.IsProcessThermoForming ||
                processFlag.IsProcessPlasticVacuumForming
              "></app-compression-molding-material>

            <app-sheet-metal-material
              [formGroup]="formGroups[FormGroupKeysMaterial.SheetMetal]"
              [defaultValues]="defaultValues"
              [sheetMetalVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                processFlag,
              }"
              [tab]="tab"
              [selectedMaterialDetails]="selectedMaterialDetails"
              (doCalculateCost)="doCalculateCost($event)"
              (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
              *ngIf="
                processFlag.IsProcessLaserCutting ||
                processFlag.IsProcessPlasmaCutting ||
                processFlag.IsProcessOxyCutting ||
                processFlag.IsProcessTubeLaserCutting ||
                processFlag.IsProcessTPP ||
                processFlag.IsProcessStampingStage ||
                processFlag.IsProcessStampingProgressive ||
                processFlag.IsProcessTransferPress ||
                processFlag.IsProcessMigWelding ||
                processFlag.IsProcessTigWelding ||
                processFlag.IsProcessTypeZincPlating ||
                processFlag.IsProcessTypeChromePlating ||
                processFlag.IsProcessTypeNickelPlating ||
                processFlag.IsProcessTypeCopperPlating ||
                processFlag.IsProcessTypeTinPlating ||
                processFlag.IsProcessTypeGoldPlating ||
                processFlag.IsProcessTypeSilverPlating ||
                processFlag.IsProcessTypeR2RPlating ||
                processFlag.IsProcessTypeGalvanization ||
                processFlag.IsProcessTypePowderCoating ||
                processFlag.IsProcessTypePowderPainting
              "></app-sheet-metal-material>

            <div
              class="col-12 text-left mt-3 pl-2"
              *ngIf="
                !!costingMaterialInfoform.controls['matPrimaryProcessName'].value &&
                !processFlag.IsProcessCasting &&
                !processFlag.IsProcessTypeWelding &&
                !processFlag.IsProcessCableAssembly &&
                !forging.hotForgingClosedDieHot &&
                !forging.hotForgingOpenDieHot &&
                !forging.coldForgingClosedDieHot &&
                !processFlag.IsProcessColdForgingColdHeading &&
                !processFlag.IsProcessTypePlating &&
                !processFlag.IsProcessTypeWetPainting &&
                !processFlag.IsProcessTypePowderCoating &&
                !processFlag.IsProcessTypePowderPainting &&
                !processFlag.IsProcessTypeGalvanization &&
                !processFlag.IsProcessTypeSiliconCoatingAuto &&
                !processFlag.IsProcessTypeSiliconCoatingSemi &&
                !processFlag.IsProcessTypeAssembly &&
                !processFlag.IsProcessMetalTubeExtrusion &&
                !processFlag.IsProcessMetalExtrusion &&
                !processFlag.IsProcessMachining &&
                !processFlag.IsProcessTubeBending &&
                !processFlag.IsProcessInsulationJacket &&
                !processFlag.IsProcessBrazing &&
                !processFlag.IsProcessPlasticTubeExtrusion &&
                !processFlag.IsProcessPlasticVacuumForming
              ">
              <!-- <div>
                <a class="link-info" href="javascript:void(0)" (click)="isMaterialDetailsDisplay = !isMaterialDetailsDisplay" id="_btnMatShow">
                  <i class="bx bx-plus"></i>
                  {{ isMaterialDetailsDisplay ? 'Show Less' : 'Show More' }}
                </a>
              </div> -->
            </div>
          </div>
          <div *ngIf="processFlag.IsProcessCustomizeCable">
            <input formControlName="materialCategory" type="hidden" />
            <input formControlName="materialFamily" type="hidden" />
            <input formControlName="materialDescription" type="hidden" />
          </div>

          <div
            class="card mt-3"
            *ngIf="
              !!costingMaterialInfoform.controls['matPrimaryProcessName'].value &&
              !processFlag.IsProcessCasting &&
              !processFlag.IsProcessTypeWelding &&
              !processFlag.IsProcessTypePlating &&
              !processFlag.IsProcessTypeWetPainting &&
              !processFlag.IsProcessTypePowderCoating &&
              !processFlag.IsProcessTypePowderPainting &&
              !processFlag.IsProcessTypeGalvanization &&
              !processFlag.IsProcessTypeSiliconCoatingAuto &&
              !processFlag.IsProcessTypeSiliconCoatingSemi &&
              !processFlag.IsProcessTypeAssembly &&
              !processFlag.IsProcessMetalTubeExtrusion &&
              !processFlag.IsProcessMetalExtrusion &&
              !processFlag.IsProcessMachining &&
              !processFlag.IsProcessTubeBending &&
              !processFlag.IsProcessInsulationJacket &&
              !processFlag.IsProcessBrazing &&
              !processFlag.IsProcessPlasticTubeExtrusion &&
              !processFlag.IsProcessPlasticVacuumForming &&
              !processFlag.IsProcessConventionalPCB &&
              !forging.hotForgingClosedDieHot &&
              !processFlag.IsProcessCustomizeCable &&
              !processFlag.IsProcessTypeInjectionMolding &&
              !processFlag.IsProcessTypeRubberInjectionMolding &&
              !processFlag.IsProcessTypeCompressionMolding &&
              !processFlag.IsProcessTypeTransferMolding &&
              !processFlag.IsProcessTypeBlowMolding &&
              !processFlag.IsProcessThermoForming &&
              !processFlag.IsProcessLaserCutting &&
              !processFlag.IsProcessPlasmaCutting &&
              !processFlag.IsProcessOxyCutting &&
              !processFlag.IsProcessTubeLaserCutting &&
              !processFlag.IsProcessTPP &&
              !processFlag.IsProcessStampingStage &&
              !processFlag.IsProcessStampingProgressive &&
              !processFlag.IsProcessTransferPress &&
              !processFlag.IsProcessMigWelding &&
              !processFlag.IsProcessTigWelding &&
              !processFlag.IsProcessTypeZincPlating &&
              !processFlag.IsProcessTypeChromePlating &&
              !processFlag.IsProcessTypeNickelPlating &&
              !processFlag.IsProcessTypeCopperPlating &&
              !processFlag.IsProcessTypeTinPlating &&
              !processFlag.IsProcessTypeGoldPlating &&
              !processFlag.IsProcessTypeSilverPlating &&
              !processFlag.IsProcessTypeR2RPlating &&
              !this.processFlag.IsProcessRigidFlexPCB &&
              !this.processFlag.IsProcessSemiRigidFlexPCB
            ">
            <div class="card-header">Material Cost Details</div>
            <div class="card-body">
              <div
                class="col-12"
                *ngIf="
                  processFlag.IsProcessTypeInjectionMolding ||
                  processFlag.IsProcessTypeRubberInjectionMolding ||
                  processFlag.IsProcessThermoForming ||
                  processFlag.IsProcessColdForgingColdHeading ||
                  processFlag.IsProcessTPP ||
                  !forging.hotForgingClosedDieHot ||
                  forging.hotForgingOpenDieHot ||
                  forging.coldForgingClosedDieHot ||
                  processFlag.IsProcessCableAssembly ||
                  processFlag.IsProcessTypeRubberExtrusion ||
                  processFlag.IsProcessTypeBlowMolding ||
                  processFlag.IsProcessPlasticVacuumForming ||
                  processFlag.IsProcessConventionalPCB
                ">
                <div class="row">
                  <div class="col-4 center">
                    <ng-container *ngTemplateOutlet="netMaterialCost; context: { labelRequired: true }"></ng-container>
                  </div>
                </div>
              </div>

              <div
                id="_matmoredetails"
                *ngIf="
                  isMaterialDetailsDisplay &&
                  !processFlag.IsProcessCableAssembly &&
                  !forging.hotForgingClosedDieHot &&
                  !forging.hotForgingOpenDieHot &&
                  !forging.coldForgingClosedDieHot &&
                  !processFlag.IsProcessColdForgingColdHeading &&
                  !processFlag.IsProcessTypePlating
                ">
                <div class="row">
                  <div
                    class="col-4 position-relative"
                    *ngIf="
                      processFlag.IsProcessTPP ||
                      processFlag.IsProcessColdForgingColdHeading ||
                      !forging.hotForgingClosedDieHot ||
                      forging.hotForgingOpenDieHot ||
                      forging.coldForgingClosedDieHot ||
                      processFlag.IsProcessThermoForming ||
                      processFlag.IsProcessPlasticVacuumForming
                    ">
                    <ng-container *ngTemplateOutlet="partProjectArea; context: { labelRequired: true }"></ng-container>
                  </div>

                  <div
                    class="col-4 position-relative"
                    *ngIf="
                      processFlag.IsProcessTPP ||
                      processFlag.IsProcessColdForgingColdHeading ||
                      !forging.hotForgingClosedDieHot ||
                      forging.hotForgingOpenDieHot ||
                      forging.coldForgingClosedDieHot ||
                      processFlag.IsProcessThermoForming ||
                      processFlag.IsProcessPlasticVacuumForming
                    ">
                    <ng-container *ngTemplateOutlet="partVolume; context: { labelRequired: true }"></ng-container>
                  </div>

                  <!-- <div class="col-4" *ngIf="processFlag.IsProcessCustomizeCable">
                      <label class="form-label no-wrap"> Material Price($/Kg):</label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'matPrice'"></app-field-comment>
                      <input type="number" [ngClass]="{ 'input-mandatory': f.matPrice.errors, 'input-valid': f.matPrice.valid }"
                        class="form-control" [OnlyNumber]="true" formControlName="matPrice" (blur)="onBlurEvent($event)" min="0" />
                    </div>

                    <div class="col-4" *ngIf="processFlag.IsProcessCustomizeCable">
                      <label class="form-label no-wrap">Scrap Price($/Kg):</label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'scrapPrice'"></app-field-comment>
                      <input type="number"
                        [ngClass]="{ 'input-mandatory': f.scrapPrice.errors, 'input-valid': f.scrapPrice.valid }"
                        formControlName="scrapPrice" [OnlyNumber]="true" class="form-control" (blur)="onBlurEvent($event)" min="0" />
                    </div> -->

                  <div class="col-4">
                    <ng-container *ngTemplateOutlet="density; context: { labelRequired: true }"></ng-container>
                  </div>

                  <!--Commenting it because there is a chance to bring this back -->
                  <!-- <div class="col-4" *ngIf="!processFlag.IsProcessThermoForming && !processFlag.IsProcessTypePowderCoating &&
                        !processFlag.IsProcessTypePowderPainting && !processFlag.IsProcessTypeWetPainting && !processFlag.IsProcessNoBakeCasting &&
                        !processFlag.IsProcessCustomizeCable
                      ">
                      <label class="form-label no-wrap"> Volume Discount (%):</label>
                      <input type="number" class="form-control" formControlName="volumeDiscountPer" readonly />
                    </div>

                    <div class="col-4" *ngIf="!processFlag.IsProcessThermoForming && !processFlag.IsProcessTypePowderCoating &&
                                                                                              !processFlag.IsProcessTypePowderPainting && !processFlag.IsProcessTypeWetPainting && !processFlag.IsProcessNoBakeCasting &&
                                                                                              !processFlag.IsProcessCustomizeCable
                                                                                            ">
                      <label class="form-label no-wrap"> Discounted Material Price ($/Kg):</label>
                      <input type="number" class="form-control" formControlName="matPriceGross" readonly />
                    </div> -->

                  <!-- <div class="col-4" *ngIf="processFlag.IsProcessCustomizeCable&&IsMaterialTypeNonFerrous">
                      <div class="form-group">
                        <label class="form-label no-wrap">Number Of Draw Steps:</label>
                        <app-field-comment [formIdentifier]="formIdentifier"
                          [fieldIdentifier]="'sandRecovery'"></app-field-comment>
                        <input type="number" class="form-control" formControlName="noOfDrawSteps" [OnlyNumber]="true"
                          (blur)="onBlurEvent($event)" min="0" />
                      </div>
                    </div>  -->

                  <!-- <div class="col-4" *ngIf="processFlag.IsProcessCustomizeCable&&IsMaterialTypeNonFerrous">
                      <div class="form-group">
                        <label class="form-label no-wrap">Percentage of Reduction %:</label>
                        <ng-container
                          *ngTemplateOutlet=" percentageOfReduction; context: { labelRequired: false } "></ng-container>
                      </div>
                    </div> -->
                </div>

                <!-- <div class="row mt-3" *ngIf="processFlag.IsProcessCustomizeCable&&cableTypes.isMulticonductor">
                        <div class="col-4">
                          <label class="form-label no-wrap" *ngIf="IsMaterialTypeNonFerrous">Number Of Wire:</label>
                          <label class="form-label no-wrap" *ngIf="!IsMaterialTypeNonFerrous">Total No.Of Cables:</label>
                          <ng-container *ngTemplateOutlet=" noOfCavities; context: { labelRequired: false } "></ng-container>
                        </div>
                        <div class="col-4">
                          <label class="form-label no-wrap" *ngIf="IsMaterialTypeNonFerrous">Initial Diameter:</label>
                          <label class="form-label no-wrap" *ngIf="!IsMaterialTypeNonFerrous">Envelop ID(mm):</label>
                          <app-field-comment [formIdentifier]="formIdentifier"
                            [fieldIdentifier]="'partOuterDiameter'"></app-field-comment>
                          <input type="number" formControlName="partOuterDiameter" class="form-control" (blur)="onBlurEvent($event)"
                            [OnlyNumber]="true" min="0" />
                        </div>
                        <div class="col-4">
                          <label class="form-label no-wrap" *ngIf="IsMaterialTypeNonFerrous">Initial Draw Length:</label>
                          <label class="form-label no-wrap" *ngIf="!IsMaterialTypeNonFerrous">Envelop OD(mm):</label>
                          <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'stockLength'"></app-field-comment>
                          <input type="number" formControlName="stockLength" class="form-control" (blur)="onBlurEvent($event)"
                            [OnlyNumber]="true" min="0" />
                        </div>
                      </div> -->

                <!-- <div class="row mt-3" *ngIf="processFlag.IsProcessCustomizeCable&&cableTypes.isMulticonductor">
                        <div class="col-4">
                          <label class="form-label no-wrap" *ngIf="IsMaterialTypeNonFerrous">Final Length of Wire (mm):</label>
                          <label class="form-label no-wrap" *ngIf="!IsMaterialTypeNonFerrous">Envelop Length/Part(mm):</label>
                          <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'sheetLength'"></app-field-comment>
                          <input type="number" formControlName="sheetLength" class="form-control" (blur)="onBlurEvent($event)"
                            [OnlyNumber]="true" min="0" />
                        </div>
                        <div class="col-4" *ngIf="!IsMaterialTypeNonFerrous"></div>
                        <div class="col-4" *ngIf="IsMaterialTypeNonFerrous">
                          <label class="form-label no-wrap">Envelope Dia (mm):</label>
                          <app-field-comment [formIdentifier]="formIdentifier"
                            [fieldIdentifier]="'partInnerDiameter'"></app-field-comment>
                          <input type="number" formControlName="partInnerDiameter" class="form-control" (blur)="onBlurEvent($event)"
                            [OnlyNumber]="true" min="0" />
                        </div>
                        <div class="col-4 position-relative">
                          <ng-container *ngTemplateOutlet="partVolume; context: { labelRequired: true }"></ng-container>
                        </div>
                      </div> -->

                <div *ngIf="processFlag.IsProcessTypeInjectionMolding || processFlag.IsProcessTypeRubberInjectionMolding">
                  <div class="row mt-3">
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Part Gross weight(g)</span>
                          <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Part_Gross_Weight')">
                            <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                          </span>
                        </label>
                        <input type="number" class="form-control" readonly="readonly" formControlName="grossWeight" id="grossWeight" />
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <ng-container *ngTemplateOutlet="scrapWeight; context: { labelRequired: true }"></ng-container>
                      </div>
                    </div>

                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap">Scrap Recovery/Part(%)</label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'scrapRecovery'"></app-field-comment>
                        <input type="number" class="form-control" formControlName="scrapRecovery" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
                      </div>
                    </div>
                  </div>

                  <div class="row mt-3" *ngIf="!processFlag.IsProcessTypePowderCoating && !processFlag.IsProcessTypePowderPainting && !processFlag.IsProcessTypeWetPainting">
                    <div class="col-4">
                      <div class="form-group">
                        <ng-container *ngTemplateOutlet="grossMaterialCost; context: { labelRequired: true }"></ng-container>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <ng-container *ngTemplateOutlet="scrapRecCost; context: { labelRequired: true }"></ng-container>
                      </div>
                    </div>

                    <div class="col-4" *ngIf="currentCommodityId !== 2">
                      <div class="form-group">
                        <label class="form-label no-wrap">Regrind(%)</label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'regrindAllowance'"></app-field-comment>
                        <input type="number" class="form-control" formControlName="regrindAllowance" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
                      </div>
                    </div>
                  </div>
                </div>

                <!-- <div class="row mt-3" *ngIf="processFlag.IsProcessCustomizeCable&&cableTypes.isMulticonductor">
                          <div class="col-4">
                            <div class="form-group">
                              <label class="form-label no-wrap"> Total Weight(g):</label>
                              <app-field-comment [formIdentifier]="formIdentifier"
                                [fieldIdentifier]="'sandRecovery'"></app-field-comment>
                              <input type="number" class="form-control" formControlName="totalPouringWeight" [OnlyNumber]="true"
                                (blur)="onBlurEvent($event)" min="0" />
                            </div>
                          </div>

                          <div class="col-4">
                            <div class="form-group">
                              <label class="form-label no-wrap">Gross weight/Part(g):</label>
                              <input type="number" class="form-control" readonly="readonly" formControlName="grossWeight" />
                            </div>
                          </div>

                          <div class="col-4">
                            <div class="form-group">
                              <ng-container *ngTemplateOutlet=" grossMaterialCost; context: { labelRequired: true } "></ng-container>
                            </div>
                          </div>
                        </div> -->

                <!-- <div class="row mt-3" *ngIf="processFlag.IsProcessCustomizeCable&&cableTypes.isSolidCore">
                          <div class="col-4">
                            <label class="form-label no-wrap" *ngIf="IsMaterialTypeNonFerrous">Number of Strands in Conductor:</label>
                            <label class="form-label no-wrap" *ngIf="!IsMaterialTypeNonFerrous">Total No.Of Cables:</label>
                            <ng-container *ngTemplateOutlet=" noOfCavities; context: { labelRequired: false } "></ng-container>
                          </div>

                          <div class="col-4">
                            <label class="form-label no-wrap" *ngIf="IsMaterialTypeNonFerrous">Initial Draw Length:</label>
                            <label class="form-label no-wrap" *ngIf="!IsMaterialTypeNonFerrous">Envelop Length/Part(mm):</label>
                            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'stockLength'"></app-field-comment>
                            <input type="number" formControlName="stockLength" class="form-control" (blur)="onBlurEvent($event)"
                              [OnlyNumber]="true" min="0" />
                          </div>

                          <div class="col-4">
                            <label class="form-label no-wrap" *ngIf="IsMaterialTypeNonFerrous">Initial Diameter:</label>
                            <label class="form-label no-wrap" *ngIf="!IsMaterialTypeNonFerrous">Envelop ID(mm):</label>
                            <app-field-comment [formIdentifier]="formIdentifier"
                              [fieldIdentifier]="'partOuterDiameter'"></app-field-comment>
                            <input type="number" formControlName="partOuterDiameter" class="form-control" (blur)="onBlurEvent($event)"
                              [OnlyNumber]="true" min="0" />
                          </div>

                        </div> -->

                <!-- <div class="row mt-3" *ngIf="processFlag.IsProcessCustomizeCable&&cableTypes.isSolidCore">
                          <div class="col-4">
                            <label class="form-label no-wrap" *ngIf="IsMaterialTypeNonFerrous">Final Length of Wire (mm):</label>
                            <label class="form-label no-wrap" *ngIf="!IsMaterialTypeNonFerrous">Envelop OD:</label>
                            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'sheetLength'"></app-field-comment>
                            <input type="number" formControlName="sheetLength" class="form-control" (blur)="onBlurEvent($event)"
                              [OnlyNumber]="true" min="0" />
                          </div>

                          <div class="col-4">
                            <label class="form-label no-wrap" *ngIf="IsMaterialTypeNonFerrous">Envelope Dia(mm):</label>
                            <label class="form-label no-wrap" *ngIf="!IsMaterialTypeNonFerrous">Part Projected area(mm^2)</label>
                            <app-field-comment [formIdentifier]="formIdentifier"
                              [fieldIdentifier]="'partInnerDiameter'"></app-field-comment>
                            <input type="number" formControlName="partInnerDiameter" class="form-control" (blur)="onBlurEvent($event)"
                              [OnlyNumber]="true" min="0" />
                          </div>


                          <div class="col-4" *ngIf="IsMaterialTypeNonFerrous">
                            <label class="form-label no-wrap">Max. plating thick/Part(mm)</label>
                            <app-field-comment [formIdentifier]="formIdentifier"
                              [fieldIdentifier]="'pouringWeight'"></app-field-comment>
                            <input type="number" formControlName="pouringWeight" class="form-control" (blur)="onBlurEvent($event)"
                              [OnlyNumber]="true" min="0" />
                          </div>

                          <div class="col-4 mt-1 position-relative">
                            <ng-container *ngTemplateOutlet="partVolume; context: { labelRequired: true }"></ng-container>
                          </div>


                          <div class="col-4 mt-1">
                            <div class="form-group">
                              <label class="form-label no-wrap">Net Weight(g):</label>
                              <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'netWeight'"></app-field-comment>
                              <input type="number" class="form-control" formControlName="netWeight" [OnlyNumber]="true"
                                (blur)="onBlurEvent($event)" min="0" />
                            </div>
                          </div>
                          <div class="col-4">
                            <div class="form-group">
                              <label class="form-label no-wrap"> Total Weight(g):</label>
                              <app-field-comment [formIdentifier]="formIdentifier"
                                [fieldIdentifier]="'sandRecovery'"></app-field-comment>
                              <input type="number" class="form-control" formControlName="totalPouringWeight" [OnlyNumber]="true"
                                (blur)="onBlurEvent($event)" min="0" />
                            </div>
                          </div>

                          <div class="col-4">
                            <div class="form-group">
                              <label class="form-label no-wrap">Gross weight/Part(g):</label>
                              <input type="number" class="form-control" readonly="readonly" formControlName="grossWeight" />
                            </div>
                          </div>

                          <div class="col-4">
                            <div class="form-group">
                              <ng-container *ngTemplateOutlet=" grossMaterialCost; context: { labelRequired: true } "></ng-container>
                            </div>
                          </div>

                        </div> -->

                <div
                  *ngIf="
                    (!processFlag.IsProcessTypeInjectionMolding &&
                      !processFlag.IsProcessTypeRubberInjectionMolding &&
                      !processFlag.IsProcessTypeCompressionMolding &&
                      !processFlag.IsProcessTypeBlowMolding &&
                      !processFlag.IsProcessTypeTransferMolding &&
                      !processFlag.IsProcessThermoForming &&
                      !processFlag.IsProcessPlasticVacuumForming &&
                      !processFlag.IsProcessTypePouring &&
                      !processFlag.IsProcessHPDCCasting &&
                      !processFlag.IsProcessLPDCCasting &&
                      !processFlag.IsProcessTypePowderCoating &&
                      !processFlag.IsProcessTypePowderPainting &&
                      !processFlag.IsProcessTypeWetPainting &&
                      !processFlag.IsProcessCustomizeCable) ||
                    processFlag.IsProcessColdForgingColdHeading
                  ">
                  <div class="row mt-3">
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Gross weight/Part(g):</span>
                          <app-info-tooltip [infoId]="'Gross_Weight_Per_Part'"></app-info-tooltip>
                        </label>
                        <input type="number" class="form-control" readonly="readonly" formControlName="grossWeight" />
                      </div>
                    </div>

                    <div class="col-4">
                      <div class="form-group">
                        <ng-container *ngTemplateOutlet="grossMaterialCost; context: { labelRequired: true }"></ng-container>
                      </div>
                    </div>

                    <div
                      class="col-4 position-relative"
                      *ngIf="
                        !processFlag.IsProcessStampingProgressive &&
                        !processFlag.IsProcessLaserCutting &&
                        !processFlag.IsProcessPlasmaCutting &&
                        !processFlag.IsProcessOxyCutting &&
                        !processFlag.IsProcessTubeLaserCutting &&
                        !processFlag.IsProcessStampingStage &&
                        !processFlag.IsProcessTPP &&
                        !forging.hotForgingClosedDieHot &&
                        !forging.hotForgingOpenDieHot &&
                        !forging.coldForgingClosedDieHot &&
                        !processFlag.IsProcessStockFormRound &&
                        !processFlag.IsProcessThermoForming &&
                        !processFlag.IsProcessTypeRubberExtrusion &&
                        !processFlag.IsProcessTypeCompressionMolding &&
                        !processFlag.IsProcessTypeBlowMolding &&
                        !processFlag.IsProcessTypeTransferMolding &&
                        !processFlag.IsProcessPlasticVacuumForming &&
                        !processFlag.IsProcessTransferPress &&
                        !processFlag.IsProcessMigWelding &&
                        !processFlag.IsProcessTigWelding &&
                        !processFlag.IsProcessTypeZincPlating &&
                        !processFlag.IsProcessTypeChromePlating &&
                        !processFlag.IsProcessTypeNickelPlating &&
                        !processFlag.IsProcessTypeCopperPlating &&
                        !processFlag.IsProcessTypeTinPlating &&
                        !processFlag.IsProcessTypeGoldPlating &&
                        !processFlag.IsProcessTypeSilverPlating &&
                        !processFlag.IsProcessTypeR2RPlating &&
                        !processFlag.IsProcessTypeGalvanization &&
                        !processFlag.IsProcessTypePowderCoating &&
                        !processFlag.IsProcessTypePowderPainting
                      ">
                      <div class="form-group" *ngIf="!processFlag.IsProcessColdForgingColdHeading">
                        <label class="form-label no-wrap">{{ isEnableUnitConversion ? 'Cutting/shear allowance (' + conversionValue + ')' : 'Cutting/shear allowance(mm)' }}:</label>

                        <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'cuttingAllowance'"></app-field-comment>
                        <input type="number" class="form-control" formControlName="cuttingAllowance" />
                      </div>
                    </div>
                  </div>

                  <div class="row mt-3">
                    <div class="col-4">
                      <div class="form-group">
                        <ng-container *ngTemplateOutlet="scrapWeight; context: { labelRequired: true }"></ng-container>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <ng-container *ngTemplateOutlet="scrapRecCost; context: { labelRequired: true }"></ng-container>
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <label class="form-label no-wrap has-icon">
                          <span class="label-text">Scrap Recovery(%):</span>
                          <app-info-tooltip [infoId]="'Part_Scrap_Recovery_Percentage'"></app-info-tooltip>
                        </label>
                        <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'scrapRecovery'"></app-field-comment>
                        <input type="number" class="form-control" formControlName="scrapRecovery" (blur)="onBlurEvent($event)" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- BEGIN - Casting -->
          <app-casting-material
            [formGroup]="formGroups[FormGroupKeysMaterial.Casting]"
            [castingVals]="{
              processFlag,
              isEnableUnitConversion,
              conversionValue,
              formIdentifier,
            }"
            [tab]="tab"
            (doCalculateCost)="doCalculateCost($event)"
            (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
            *ngIf="
              processFlag.IsProcessNoBakeCasting ||
              processFlag.IsProcessInvestmentCasting ||
              processFlag.IsProcessGreenCasting ||
              processFlag.IsProcessHPDCCasting ||
              processFlag.IsProcessGDCCasting ||
              this.processFlag.IsProcessLPDCCasting
            "></app-casting-material>
          <!-- END - Casting -->

          <app-material-sustainability
            [formGroup]="formGroups[FormGroupKeysMaterial.MaterialSustainability]"
            [compVals]="{
              isEnableUnitConversion,
              conversionValue,
              formIdentifier,
              isMaterialDetailsDisplay,
            }"
            (doCalculateCost)="doCalculateCost($event)"></app-material-sustainability>

          <ng-template #partLengthField let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">
                {{ isEnableUnitConversion ? 'Part Length (' + conversionValue + ')' : 'Part Length (mm)' }}
              </span>
              :
              <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Length_mm')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
              :
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'length'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.length.errors,
                'input-valid': f.length.valid,
              }"
              class="form-control"
              formControlName="length"
              [OnlyNumber]="true"
              placeholder="Length"
              (blur)="onBlurEvent($event)"
              min="0" />
          </ng-template>
          <ng-template #partWidthField let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">
                {{ isEnableUnitConversion ? 'Part Width (' + conversionValue + ')' : 'Part Width (mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Part_Width'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'width'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.width.errors,
                'input-valid': f.width.valid,
              }"
              class="form-control"
              formControlName="width"
              [OnlyNumber]="true"
              placeholder="Width"
              (blur)="onBlurEvent($event)"
              min="0" />
          </ng-template>
          <ng-template #partHeightField let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">
                {{ isEnableUnitConversion ? 'Part Height (' + conversionValue + ')' : 'Part Height (mm)' }}
              </span>

              <span class="notification" [ngbPopover]="popContent" ngbPopoverClass="custom-popover" placement="auto" popoverTitle="Description" (click)="showinfo('Envelope_Height_mm')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'height'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.height.errors,
                'input-valid': f.height.valid,
              }"
              class="form-control"
              formControlName="height"
              [OnlyNumber]="true"
              placeholder="Height"
              (blur)="onBlurEvent($event)"
              min="0" />
          </ng-template>
          <ng-template #partThickness let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">Part Thickness ({{ isEnableUnitConversion ? conversionValue : 'mm' }}):</label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'partTickness'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.partTickness.errors,
                'input-valid': f.partTickness.valid,
              }"
              class="form-control"
              formControlName="partTickness"
              [OnlyNumber]="true"
              placeholder="Part Thickness"
              (blur)="calculateCost('partTickness')"
              min="0" />
          </ng-template>
          <ng-template #partProjectArea let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">
                Part Projected Area
                {{ isEnableUnitConversion ? '(' + conversionValue + '^2)' : '(mm^2)' }}
              </span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Part_Projected_Area')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'partProjectArea'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.partProjectArea.errors,
                'input-valid': f.partProjectArea.valid,
              }"
              class="form-control"
              placeholder="Enter Area"
              [OnlyNumber]="true"
              formControlName="partProjectArea"
              (blur)="onBlurEvent($event)"
              min="0" />
          </ng-template>
          <ng-template #partVolume let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">
                Part Volume
                {{ isEnableUnitConversion ? '(' + conversionValue + '^3)' : '(mm^3)' }}
              </span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Part_Volume')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'partVolume'"></app-field-comment>
            <input type="number" class="form-control" [OnlyNumber]="true" placeholder="Enter Volume" formControlName="partVolume" (blur)="onBlurEvent($event)" min="0" />
          </ng-template>
          <ng-template #netWeight let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">Net Weight (g):</label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'netWeight'"></app-field-comment>
            <input
              type="number"
              class="form-control"
              [ngClass]="{
                'input-mandatory': f.netWeight.errors,
                'input-valid': f.netWeight.valid,
              }"
              placeholder="Enter weight"
              formControlName="netWeight"
              [OnlyNumber]="true"
              (blur)="onBlurEvent($event)"
              min="0" />
          </ng-template>
          <ng-template #density let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">Density (g/cc)</span>
              <app-info-tooltip [infoId]="'Density'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'density'"></app-field-comment>
            <input type="number" formControlName="density" class="form-control" (blur)="calculateCost('density')" [OnlyNumber]="true" min="0" />
          </ng-template>
          <ng-template #paintCoatingTickness let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">Paint Coating Thickness (m)</label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'paintCoatingTickness'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.paintCoatingTickness.errors,
                'input-valid': f.paintCoatingTickness.valid,
              }"
              class="form-control"
              formControlName="paintCoatingTickness"
              [OnlyNumber]="true"
              placeholder="PaintCoatingTickness"
              (blur)="onBlurEvent($event)"
              min="0" />
          </ng-template>
          <ng-template #noOfCavities let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">No. of Cavities test</span>
              <app-info-tooltip [infoId]="'No_Of_Cavities'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'noOfCavities'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.noOfCavities.errors,
                'input-valid': f.noOfCavities.valid,
              }"
              class="form-control"
              formControlName="noOfCavities"
              [OnlyNumber]="true"
              (blur)="onBlurEvent($event)"
              min="0" />
          </ng-template>
          <ng-template #percentageOfReduction let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">Masking Area %</label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'percentageOfReduction'"></app-field-comment>
            <input type="number" class="form-control" formControlName="percentageOfReduction" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
          </ng-template>
          <ng-template #netMaterialCost let-labelRequired="labelRequired">
            <label class="form-label no-wrap font-medium has-icon" *ngIf="labelRequired">
              <span class="label-text">Net Material Cost ($)</span>
              <app-info-tooltip [infoId]="'Net_Material_Cost'"></app-info-tooltip>
            </label>
            <input type="number" class="form-control text-base font-semibold" formControlName="netMaterialCost" readonly />
          </ng-template>
          <ng-template #partSurfaceArea let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">
                Part Surface Area
                {{ isEnableUnitConversion ? '(' + conversionValue + '^2)' : '(mm^3)' }}
              </span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Part_Surface_Area')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'partSurfaceArea'"></app-field-comment>
            <input type="number" class="form-control" formControlName="partSurfaceArea" (blur)="onBlurEvent($event)" />
          </ng-template>
          <ng-template #stockOuterDiameter let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">
              {{ isEnableUnitConversion ? 'Stock Outer Diameter(' + conversionValue + ')' : 'Stock Outer Diameter(mm)' }}
              :
            </label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'stockOuterDiameter'"></app-field-comment>
            <input type="number" class="form-control" [OnlyNumber]="true" formControlName="stockOuterDiameter" (blur)="onBlurEvent($event)" min="0" />
          </ng-template>
          <ng-template #stockInnerDiameter let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">{{ isEnableUnitConversion ? 'Stock Inner Diameter(' + conversionValue + ')' : 'Stock Inner Diameter(mm)' }}</label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'stockInnerDiameter'"></app-field-comment>
            <input type="number" class="form-control" [OnlyNumber]="true" formControlName="stockInnerDiameter" (blur)="onBlurEvent($event)" min="0" />
          </ng-template>
          <ng-template #utilisation let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">Material Utilisation %</span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Material_Utilisation')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'utilisation'"></app-field-comment>
            <input type="number" class="form-control" formControlName="utilisation" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
          </ng-template>
          <ng-template #grossWeight let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">Gross Weight (g)</label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'grossWeight'"></app-field-comment>
            <input type="number" class="form-control" formControlName="grossWeight" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
          </ng-template>
          <ng-template #scrapWeight let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">Part Scrap Weight (g)</span>
              <app-info-tooltip [infoId]="'Part_Scrap_Weight'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'scrapWeight'"></app-field-comment>
            <input type="number" class="form-control" formControlName="scrapWeight" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
          </ng-template>
          <ng-template #grossMaterialCost let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">Part Gross Material Cost($)</span>
              <app-info-tooltip [infoId]="'Part_Gross_Material_Cost'"></app-info-tooltip>
            </label>
            <input type="number" class="form-control" readonly="readonly" formControlName="grossMaterialCost" />
          </ng-template>
          <ng-template #scrapRecCost let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">Part Scrap Recovery($)</span>
              <app-info-tooltip [infoId]="'Part_Scrap_Recovery_Cost'"></app-info-tooltip>
            </label>
            <input type="number" class="form-control" readonly="readonly" formControlName="scrapRecCost" />
          </ng-template>
          <ng-template #inputBilletDiameter let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">Billet Diameter {{ isEnableUnitConversion ? '(' + conversionValue + ')' : '(mm)' }}</label>
            <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'inputBilletDiameter'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-valid': costingMaterialInfoform.controls['inputBilletDiameter']?.touched && costingMaterialInfoform.controls['inputBilletDiameter']?.valid,
                'input-yellow': costingMaterialInfoform.controls['inputBilletDiameter']?.touched && costingMaterialInfoform.controls['inputBilletDiameter']?.invalid,
              }"
              class="form-control input-sm input-auto"
              formControlName="inputBilletDiameter"
              placeholder="inputBilletDiameter"
              (blur)="onBlurEvent($event)"
              min="0" />
          </ng-template>
          <ng-template #unbendPartWeight let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">Coil end loss (gms)</label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'unbendPartWeight'"></app-field-comment>
            <input type="number" class="form-control" formControlName="unbendPartWeight" (blur)="onBlurEvent($event)" [OnlyNumber]="true" />
          </ng-template>
          <ng-template #partsPerCoil let-labelRequired="labelRequired">
            <label class="form-label no-wrap has-icon" *ngIf="labelRequired">
              <span class="label-text">No of Parts Produced per Coil</span>
              <app-info-tooltip [infoId]="'Forging_No_of_Parts_Produced_per_Coil'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'partsPerCoil'"></app-field-comment>
            <input type="number" class="form-control" formControlName="partsPerCoil" (blur)="onBlurEvent($event)" [OnlyNumber]="true" />
          </ng-template>
          <ng-template #sheetLength let-labelRequired="labelRequired">
            <label class="form-label no-wrap" *ngIf="labelRequired">Sheet Length {{ isEnableUnitConversion ? '(' + conversionValue + ')' : '(mm)' }}:</label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'sheetLength'"></app-field-comment>
            <input type="number" class="form-control" formControlName="sheetLength" (blur)="onBlurEvent($event)" readonly="readonly" />
          </ng-template>

          <ng-template #dialogTemplate>
            <div class="flex flex-col w-full h-full min-h-0">
              <div class="modal-header flex items-center justify-between w-full">
                <h4 class="modal-title" id="modal-basic-title">Material Lookup</h4>
                <button aria-label="Close modal" title="Close Modal" class="modal-close flex items-center justify-center border-none bg-white" (click)="dialogRef.close()">
                  <mat-icon class="close-icon" matTooltip="Close" matTooltipPosition="above">close_icon</mat-icon>
                </button>
              </div>
              <div class="modal-body flex flex-col h-full min-h-0">
                <app-generic-data-table
                  [apiUrl]="'/api/master/MaterialMaster/country/' + currentPart?.mfrCountryId"
                  [columns]="masterMaterialColumns"
                  [selectable]="true"
                  [dataKey]="'materialDescId'"
                  (rowSelect)="onSearchResultChange($event)"></app-generic-data-table>
              </div>
            </div>
          </ng-template>
        </ng-container>

        <ng-container *ngIf="tab === 'Nesting Layout'">
          <app-sheet-metal-material
            [formGroup]="formGroups[FormGroupKeysMaterial.SheetMetal]"
            [sheetMetalVals]="{
              isEnableUnitConversion,
              conversionValue,
              formIdentifier,
              processFlag,
            }"
            [tab]="tab"
            [selectedMaterialDetails]="selectedMaterialDetails"
            (doCalculateCost)="doCalculateCost($event)"
            (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
            (viewUnfoldedPart)="viewUnfoldedPart()"
            (viewNestingAlgo)="viewNestingAlgo()"
            (viewNestingAlgoNew)="viewNestingAlgoNew()"
            *ngIf="
              processFlag.IsProcessLaserCutting ||
              processFlag.IsProcessPlasmaCutting ||
              processFlag.IsProcessOxyCutting ||
              (processFlag.IsProcessTubeLaserCutting && processFlag.IsProcessTPP) ||
              processFlag.IsProcessStampingStage ||
              processFlag.IsProcessStampingProgressive ||
              processFlag.IsProcessTransferPress
            "></app-sheet-metal-material>
        </ng-container>

        <ng-container *ngIf="tab === 'Cavity and Mold Type'">
          @if (
            processFlag.IsProcessTypeCompressionMolding ||
            processFlag.IsProcessTypeBlowMolding ||
            processFlag.IsProcessTypeTransferMolding ||
            processFlag.IsProcessThermoForming ||
            processFlag.IsProcessPlasticVacuumForming
          ) {
            <app-compression-molding-material
              [formGroup]="formGroups[FormGroupKeysMaterial.CompressionMolding]"
              [compressionMoldingVals]="{
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
                processFlag,
              }"
              [tab]="tab"
              [selectedMaterialDetails]="selectedMaterialDetails"
              (doCalculateCost)="doCalculateCost($event)"
              (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
              *ngIf="
                processFlag.IsProcessTypeCompressionMolding ||
                processFlag.IsProcessTypeBlowMolding ||
                processFlag.IsProcessTypeTransferMolding ||
                processFlag.IsProcessThermoForming ||
                processFlag.IsProcessPlasticVacuumForming
              "></app-compression-molding-material>
          } @else {
            <div class="card mt-3">
              <div class="card-header">Cavity Layout</div>
              <div class="card-body">
                <div class="row">
                  <div class="col-4 relative">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Number of Cavity (Nos)</span>
                      <app-info-tooltip [infoId]="'Number_Of_Cavity'"></app-info-tooltip>
                    </label>
                    <input
                      type="number"
                      [ngClass]="{
                        'input-mandatory': f.noOfCavities.errors,
                        'input-valid': f.noOfCavities.valid,
                        'input-overridden': f.noOfCavities.dirty && f.noOfCavities.touched,
                      }"
                      class="form-control"
                      formControlName="noOfCavities"
                      [OnlyNumber]="true"
                      (blur)="onBlurEvent($event)"
                      min="0" />
                  </div>
                  @if (!processFlag.IsProcessCasting) {
                    <div class="col-4 relative">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Number of Cavity Length(Nos)</span>
                        <app-info-tooltip [infoId]="'Number_Of_Cavity_Length'"></app-info-tooltip>
                      </label>
                      <input type="number" class="form-control" placeholder="Enter cavity length" formControlName="cavityArrangementLength" (blur)="onBlurEvent($event)" />
                    </div>
                    <div class="col-4 relative">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Number of Cavity Width(Nos)</span>
                        <app-info-tooltip [infoId]="'Number_Of_Cavity_Width'"></app-info-tooltip>
                      </label>
                      <input type="number" class="form-control" placeholder="Enter cavity width" formControlName="cavityArrangementWidth" (blur)="onBlurEvent($event)" readonly />
                    </div>
                  }

                  <div
                    class="col-4"
                    *ngIf="
                      !(
                        processFlag.IsProcessNoBakeCasting ||
                        processFlag.IsProcessInvestmentCasting ||
                        processFlag.IsProcessGreenCasting ||
                        processFlag.IsProcessHPDCCasting ||
                        processFlag.IsProcessGDCCasting ||
                        processFlag.IsProcessLPDCCasting ||
                        processFlag.IsProcessTypeInjectionMolding ||
                        processFlag.IsProcessTypeRubberInjectionMolding
                      )
                    ">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Number Of Inserts/Part</span>
                      <app-info-tooltip
                        [infoId]="
                          processFlag.IsProcessColdForgingColdHeading || forging.hotForgingClosedDieHot || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot
                            ? 'Forging_Number_Of_Inserts'
                            : 'Number_Of_Inserts'
                        "></app-info-tooltip>
                    </label>
                    <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'noOfInserts'"></app-field-comment>
                    <input
                      type="number"
                      [ngClass]="{
                        'input-mandatory': f.noOfInserts.errors,
                        'input-valid': f.noOfInserts.valid,
                      }"
                      class="form-control"
                      formControlName="noOfInserts"
                      [OnlyNumber]="true"
                      (blur)="onBlurEvent($event)"
                      min="0" />
                  </div>
                </div>
                <!-- <div class="row">
                  <div class="col-12">
                    <div class="img-wrap">
                      <img src="/src/assets/images/cavity-layout.png" alt="Cavity Layout" class="img-fluid" />
                    </div>
                  </div>
                </div> -->
              </div>
            </div>
            <div
              class="card mt-3"
              *ngIf="processFlag.IsProcessTypeInjectionMolding || processFlag.IsProcessTypeRubberInjectionMolding || processFlag.IsProcessThermoForming || processFlag.IsProcessPlasticVacuumForming">
              <div class="card-header">Mold Type</div>
              <div class="card-body">
                <div class="row mt-3">
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Runner Type</span>
                      <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Runner_Type')">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'runnerType'"></app-field-comment>
                    <select class="form-control" formControlName="runnerType" (change)="onBlurEvent($event)">
                      <option value="">----Select Process -----</option>
                      <option value="Hot Runner">Hot Runner</option>
                      <option value="Cold/Hot(hybrid)">Cold/Hot(hybrid)</option>
                      <option value="Cold Runner">Cold Runner</option>
                    </select>
                  </div>

                  <div class="col-4">
                    <div class="form-group">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ isEnableUnitConversion ? 'Runner Dia/Part(' + conversionValue + ')' : 'Runner Dia/Part(mm)' }}
                        </span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Runner_Gap_Width')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'runnerDia'"></app-field-comment>
                      <input type="number" class="form-control" formControlName="runnerDia" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
                    </div>
                  </div>

                  <div class="col-4 position-relative">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">
                        {{ isEnableUnitConversion ? 'Runner Length/Part(' + conversionValue + ')' : 'Runner Length/Part(mm)' }}
                      </span>
                      <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Runner_Gap_Length')">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="formIdentifier" [fieldIdentifier]="'runnerLength'"></app-field-comment>
                    <input type="number" class="form-control" formControlName="runnerLength" [OnlyNumber]="true" (blur)="onBlurEvent($event)" min="0" />
                  </div>

                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">No. of External Side Cores</span>
                      <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('No_Of_External_Side_Cores')">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <input type="number" class="form-control" formControlName="totalWeldLength" [OnlyNumber]="true" (blur)="onBlurEvent($event)" placeholder="No. of External Side Cores" />
                  </div>
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">No. of Internal Side Cores</span>
                      <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('No_Of_Internal_Side_Cores')">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <input type="number" class="form-control" formControlName="totalWeldBeadArea" [OnlyNumber]="true" (blur)="onBlurEvent($event)" placeholder="Enter No. of Internal Side Cores" />
                  </div>
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Unscrewing Undercuts</span>
                      <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Unscrewing_Undercuts')">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <input type="number" class="form-control" formControlName="beadSize" [OnlyNumber]="true" (blur)="onBlurEvent($event)" placeholder="Enter Unscrewing Undercuts" />
                  </div>
                </div>

                <!-- <div class="row">
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Runner Type</span>
                      <span class="notification">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <input type="number" class="form-control" placeholder="Enter runner type" />
                  </div>
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Runner Dia/Part (mm)</span>
                      <span class="notification">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <input type="text" class="form-control" placeholder="Enter runner dia/part" />
                  </div>
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Runner Length/Part (mm)</span>
                      <span class="notification">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <input type="text" class="form-control" placeholder="Enter runner length/part" />
                  </div>
                </div> -->
              </div>
            </div>
            <app-casting-material
              [formGroup]="formGroups[FormGroupKeysMaterial.Casting]"
              [castingVals]="{
                processFlag,
                isEnableUnitConversion,
                conversionValue,
                formIdentifier,
              }"
              [tab]="tab"
              (doCalculateCost)="doCalculateCost($event)"
              (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
              *ngIf="
                processFlag.IsProcessNoBakeCasting ||
                processFlag.IsProcessInvestmentCasting ||
                processFlag.IsProcessGreenCasting ||
                processFlag.IsProcessHPDCCasting ||
                processFlag.IsProcessGDCCasting ||
                this.processFlag.IsProcessLPDCCasting
              "></app-casting-material>
          }
        </ng-container>
        <ng-container *ngIf="tab === 'Material Details'">
          <app-sheet-metal-material
            [formGroup]="formGroups[FormGroupKeysMaterial.SheetMetal]"
            [sheetMetalVals]="{
              isEnableUnitConversion,
              conversionValue,
              formIdentifier,
              processFlag,
            }"
            [tab]="tab"
            [selectedMaterialDetails]="selectedMaterialDetails"
            (doCalculateCost)="doCalculateCost($event)"
            (dirtyCheckEvent)="dirtyCheckEvent.emit($event)"
            *ngIf="
              processFlag.IsProcessLaserCutting ||
              processFlag.IsProcessPlasmaCutting ||
              processFlag.IsProcessOxyCutting ||
              processFlag.IsProcessTubeLaserCutting ||
              processFlag.IsProcessTPP ||
              processFlag.IsProcessStampingStage ||
              processFlag.IsProcessStampingProgressive ||
              processFlag.IsProcessTransferPress ||
              processFlag.IsProcessMigWelding ||
              processFlag.IsProcessTigWelding ||
              processFlag.IsProcessTypeZincPlating ||
              processFlag.IsProcessTypeChromePlating ||
              processFlag.IsProcessTypeNickelPlating ||
              processFlag.IsProcessTypeCopperPlating ||
              processFlag.IsProcessTypeTinPlating ||
              processFlag.IsProcessTypeGoldPlating ||
              processFlag.IsProcessTypeSilverPlating ||
              processFlag.IsProcessTypeR2RPlating ||
              processFlag.IsProcessTypeGalvanization ||
              processFlag.IsProcessTypePowderCoating ||
              processFlag.IsProcessTypePowderPainting
            "></app-sheet-metal-material>

          <div class="card mt-3">
            <div class="card-header pre-formatted-text">Physical Properties</div>
            <div class="card-body">
              <div class="row">
                <div class="col-8 relative">
                  <label class="form-label no-wrap has-icon">
                    <span class="label-text">Material Description</span>
                    <app-info-tooltip [infoId]="'Material_Description'"></app-info-tooltip>
                  </label>
                  <input type="text" formControlName="materialDesc" class="form-control" readonly />
                </div>
                <div class="col-4">
                  <label class="form-label no-wrap has-icon">
                    <span class="label-text">Region</span>
                    <span
                      class="notification"
                      [ngbPopover]="popContent"
                      placement="auto"
                      (click)="
                        showinfo(
                          processFlag.IsProcessNoBakeCasting ||
                            processFlag.IsProcessInvestmentCasting ||
                            processFlag.IsProcessGreenCasting ||
                            processFlag.IsProcessHPDCCasting ||
                            processFlag.IsProcessGDCCasting ||
                            processFlag.IsProcessLPDCCasting
                            ? 'Casting_Region'
                            : 'Region'
                        )
                      ">
                      <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                    </span>
                  </label>
                  <input type="text" formControlName="countryName" class="form-control" readonly />
                </div>
              </div>

              @if (currentPart?.commodityId === commodityType.SheetMetal) {
                <div class="row">
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Density (g/cc)</span>
                      <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Density')">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'density'"></app-field-comment>
                    <input type="number" formControlName="density" class="form-control" readonly />
                  </div>

                  <ng-container
                    *ngIf="!(processFlag.IsProcessTypePowderCoating || processFlag.IsProcessTypePowderPainting || processFlag.IsProcessTypePlating || processFlag.IsProcessTypeGalvanization)">
                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Yield Strength (MPa)</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Yield_Strength')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'moldTemp'"></app-field-comment>
                      <input type="number" formControlName="moldTemp" class="form-control" readonly />
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Tensile Strength (MPa)</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Tensile_Strength')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'ultimateTensileStrength'"></app-field-comment>
                      <input type="number" formControlName="ultimateTensileStrength" class="form-control" readonly />
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Shearing Strength (MPa)</span>
                        <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Shearing_Strength')">
                          <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                        </span>
                      </label>
                      <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'meltTemp'"></app-field-comment>
                      <input type="number" formControlName="meltTemp" class="form-control" readonly />
                    </div>
                  </ng-container>
                </div>
              } @else {
                <div class="row">
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Density (g/cc)</span>
                      <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Density')">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <app-field-comment [formIdentifier]="formIdentifier" [fieldIdentifier]="'density'"></app-field-comment>
                    <input type="number" formControlName="density" class="form-control" readonly />
                  </div>
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text" *ngIf="processFlag.IsProcessTypeInjectionMolding || processFlag.IsProcessTypeRubberInjectionMolding">Cavity Pressure (kgf/mm^2)</span>
                      <span class="label-text" *ngIf="!(processFlag.IsProcessTypeInjectionMolding || processFlag.IsProcessTypeRubberInjectionMolding)">Clamping Pressure (kgf/cm^2)</span>
                      <span
                        class="notification"
                        [ngbPopover]="popContent"
                        placement="auto"
                        (click)="
                          showinfo(
                            processFlag.IsProcessNoBakeCasting ||
                              processFlag.IsProcessInvestmentCasting ||
                              processFlag.IsProcessGreenCasting ||
                              processFlag.IsProcessHPDCCasting ||
                              processFlag.IsProcessGDCCasting ||
                              processFlag.IsProcessLPDCCasting
                              ? 'Casting_Clamping_Pressure'
                              : 'Clamping_Pressure'
                          )
                        ">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <input type="number" formControlName="clampingPressure" class="form-control" readonly />
                  </div>
                </div>
                <div class="row">
                  <div class="col-4" *ngIf="!(processFlag.IsProcessTypeTransferMolding || processFlag.IsProcessTypeCompressionMolding || processFlag.IsProcessTypeRubberInjectionMolding)">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Melt Temperature (C)</span>
                      <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Melt_Temperature')">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                      <app-info-tooltip
                        [infoId]="
                          processFlag.IsProcessColdForgingColdHeading || forging.hotForgingClosedDieHot || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot
                            ? 'Forging_Melt_Temperature'
                            : 'Melt_Temperature'
                        "></app-info-tooltip>
                    </label>
                    <input type="number" formControlName="meltTemp" class="form-control" readonly />
                  </div>
                  <div class="col-4" *ngIf="!(processFlag.IsProcessTypeTransferMolding || processFlag.IsProcessTypeCompressionMolding || processFlag.IsProcessTypeRubberInjectionMolding)">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Mold Temperature (C)</span>
                      <app-info-tooltip
                        [infoId]="
                          processFlag.IsProcessColdForgingColdHeading || forging.hotForgingClosedDieHot || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot
                            ? 'Forging_Mold_Temperature'
                            : 'Mold_Temperature'
                        "></app-info-tooltip>
                    </label>
                    <input type="number" formControlName="moldTemp" class="form-control" readonly />
                  </div>
                  <div class="col-4" *ngIf="!(processFlag.IsProcessTypeTransferMolding || processFlag.IsProcessTypeCompressionMolding || processFlag.IsProcessTypeRubberInjectionMolding)">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Ejection Temperature (C)</span>
                      <app-info-tooltip
                        [infoId]="
                          processFlag.IsProcessColdForgingColdHeading || forging.hotForgingClosedDieHot || forging.hotForgingOpenDieHot || forging.coldForgingClosedDieHot
                            ? 'Forging_Ejection_Temperature'
                            : 'Ejection_Temperature'
                        "></app-info-tooltip>
                    </label>
                    <input type="number" formControlName="ejectTemp" class="form-control" readonly />
                  </div>
                </div>
              }
            </div>
          </div>
          <!-- } -->
          @if (materialCompositionDtos.length > 0) {
            <div class="chemical-chart-header">
              <div class="text-xs font-semibold pt-3 pb-2 px-2 flex items-center">
                <span class="text-xs font-semibold">Chemical Composition</span>
                <span class="notification-icon ml-1" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Chemical_Composition')">
                  <mat-icon class="info-icon !w-[14px] !h-[14px]" svgIcon="information"></mat-icon>
                </span>
              </div>
            </div>
            <app-chart
              [chartType]="barChartType"
              [chartConstructor]="chartConstructor"
              [title]="'Chemical Composition'"
              [chartHeight]="chartHeight"
              [chartData]="materialCompositionDtos"
              class="chemical-chart-container"></app-chart>
          }
          @if (stockData.length > 0) {
            <div class="card mt-3 no-seperation">
              <div class="card-header pre-formatted-text flex items-center">
                <span>Pricing</span>
                <span class="notification-icon ml-1" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Pricing_Information')">
                  <mat-icon class="info-icon !w-[14px] !h-[14px]" svgIcon="information"></mat-icon>
                </span>
              </div>
              <div class="card-body">
                <div class="row !mb-1">
                  <div class="col !w-full !max-w-full">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Key Index</span>
                      <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Key_Index')">
                        <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                      </span>
                    </label>
                    <input type="text" class="form-control" readonly />
                  </div>
                </div>
                <div class="row">
                  <label class="form-label no-wrap has-icon !px-2">
                    <span class="label-text">Historical Pricing Trend</span>
                    <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Historical_Pricing_Trend')">
                      <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                    </span>
                  </label>
                  <div class="col-6">
                    <div class="flex flex-col stock-value !p-4 w-full items-center" [ngClass]="{ 'stock-down': past3MonthChange > 0, 'stock-up': past3MonthChange <= 0 }">
                      <div class="text-xs label mb-1">Past 3 Month Change</div>
                      <div class="flex items-center gap-1">
                        <span class="text-base font-semibold value">{{ past3MonthChange > 0 ? '+' : '' }} {{ past3MonthChange | percentage }}</span>
                        <mat-icon *ngIf="past3MonthChange <= 0" class="status-icon" svgIcon="graph-arrow-down"></mat-icon>
                        <mat-icon *ngIf="past3MonthChange > 0" class="status-icon" svgIcon="graph-arrow-up"></mat-icon>
                      </div>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="flex flex-col stock-value !p-4 w-full items-center" [ngClass]="{ 'stock-down': next6MonthChange > 0, 'stock-up': next6MonthChange <= 0 }">
                      <div class="text-xs label mb-1">Next 6 Month Change (Forecasted)</div>
                      <div class="flex items-center gap-1">
                        <span class="text-base font-semibold value">{{ next6MonthChange > 0 ? '+' : '' }} {{ next6MonthChange | percentage }}</span>
                        <mat-icon *ngIf="next6MonthChange <= 0" class="status-icon" svgIcon="graph-arrow-down"></mat-icon>
                        <mat-icon *ngIf="next6MonthChange > 0" class="status-icon" svgIcon="graph-arrow-up"></mat-icon>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <app-chart [chartType]="stockChartType" [chartConstructor]="stockConstructor" [chartHeight]="chartHeight" [chartData]="stockData" class="pricing-chart-container"></app-chart>
          }
        </ng-container>
      </mat-tab>
    </mat-tab-group>
  }
</form>
