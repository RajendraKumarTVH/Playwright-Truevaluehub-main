<div [formGroup]="formGroup">
  <!-- #region Tab 1 -->
  <ng-container *ngIf="tab === 'Material Info'">
    <div class="card">
      <div class="card-header">Part Details</div>
      <div class="card-body" *ngIf="!sheetMetalVals.processFlag.IsProcessTubeLaserCutting">
        <div class="row">
          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Part Envelope Length (' + sheetMetalVals.conversionValue + ')' : 'Part Envelope Length(mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Sheetmetal_Envelope_Length_mm'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'length'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.length.errors,
                'input-valid': f.length.valid && !f.length.dirty,
                'input-overridden': f.length.dirty && f.length.touched,
              }"
              class="form-control"
              formControlName="length"
              [OnlyNumber]="true"
              placeholder="Length"
              (blur)="calculateCost()"
              min="0" />
          </div>
          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Part Envelope Width (' + sheetMetalVals.conversionValue + ')' : 'Part Envelope Width(mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Sheetmetal_Envelope_Width_mm'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'width'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.width.errors,
                'input-valid': f.width.valid && !f.width.dirty,
                'input-overridden': f.width.dirty && f.width.touched,
              }"
              class="form-control"
              formControlName="width"
              [OnlyNumber]="true"
              placeholder="Width"
              (blur)="calculateCost()"
              min="0" />
          </div>
          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Part Envelope Height (' + sheetMetalVals.conversionValue + ')' : 'Part Envelope Height(mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Sheetmetal_Envelope_Height_mm'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'height'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.height.errors,
                'input-valid': f.height.valid && !f.height.dirty,
                'input-overridden': f.height.dirty && f.height.touched,
              }"
              class="form-control"
              formControlName="height"
              [OnlyNumber]="true"
              placeholder="Height"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div
            class="col-4"
            *ngIf="
              !(
                (sheetMetalVals.processFlag.IsProcessTypeWelding && !sheetMetalVals.processFlag.IsProcessSpotWelding) ||
                sheetMetalVals.processFlag.IsProcessTypePowderCoating ||
                sheetMetalVals.processFlag.IsProcessTypePowderPainting
              )
            ">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Thickness (' + sheetMetalVals.conversionValue + ')' : 'Thickness (mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Thickness'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'thickness'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.thickness.errors,
                'input-valid': f.thickness.valid && !f.thickness.dirty,
                'input-overridden': f.thickness.dirty && f.thickness.touched,
              }"
              class="form-control"
              formControlName="thickness"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div class="col-4" *ngIf="sheetMetalVals.processFlag.IsProcessTypeWelding && !sheetMetalVals.processFlag.IsProcessSpotWelding">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Net Weight (g)</span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" popoverTitle="Description" (click)="showinfo('Net_Weight_Sheet_Metal')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'netWeight'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.netWeight.errors,
                'input-valid': f.netWeight.valid && !f.netWeight.dirty,
                'input-overridden': f.netWeight.dirty,
              }"
              class="form-control"
              formControlName="netWeight"
              [OnlyNumber]="true"
              (blur)="onBlurEvent($event)"
              min="0" />
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                Part Surface Area
                {{ sheetMetalVals.isEnableUnitConversion ? '(' + sheetMetalVals.conversionValue + '^2)' : '(mm^2)' }}
              </span>
              <app-info-tooltip [infoId]="'Part_Surface_Area'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partSurfaceArea'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.partSurfaceArea.errors,
                'input-valid': f.partSurfaceArea.valid && !f.partSurfaceArea.dirty,
                'input-overridden': f.partSurfaceArea.dirty && f.partSurfaceArea.touched,
              }"
              class="form-control"
              formControlName="partSurfaceArea"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                Part Volume
                {{ sheetMetalVals.isEnableUnitConversion ? '(' + sheetMetalVals.conversionValue + '^3)' : '(mm^3)' }}
              </span>
              <app-info-tooltip [infoId]="'Part_Volume_sheet_metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partVolume'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.partVolume.errors,
                'input-valid': f.partVolume.valid && !f.partVolume.dirty,
                'input-overridden': f.partVolume.dirty && f.partVolume.touched,
              }"
              class="form-control"
              formControlName="partVolume"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div
            class="col-4"
            *ngIf="sheetMetalVals.processFlag.IsProcessTypeGalvanization || sheetMetalVals.processFlag.IsProcessTypePowderCoating || sheetMetalVals.processFlag.IsProcessTypePowderPainting">
            <label class="form-label no-wrap">Masking Area %</label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'percentageOfReduction'"></app-field-comment>
            <input type="number" class="form-control" formControlName="percentageOfReduction" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
          </div>

          <div class="col-4" *ngIf="sheetMetalVals.processFlag.IsProcessTypeGalvanization">
            <label class="form-label no-wrap">Coating Suface Area %</label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'paintArea'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.paintArea.errors,
                'input-valid': f.paintArea.valid && !f.paintArea.dirty,
                'input-overridden': f.paintArea.dirty && f.paintArea.touched,
              }"
              class="form-control"
              formControlName="paintArea"
              [OnlyNumber]="true"
              placeholder="Paint Area"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div class="col-4" *ngIf="sheetMetalVals.processFlag.IsProcessTypeGalvanization">
            <label class="form-label no-wrap">Coating Grade:</label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'typeOfMaterialBase'"></app-field-comment>
            <select formControlName="typeOfMaterialBase" class="form-control" (change)="calculateCost('typeOfMaterialBase')">
              <option value="0" selected>Select Coating Grade</option>
              <option *ngFor="let option of coatingGrade" [value]="option.id">
                {{ option.grade }}
              </option>
            </select>
          </div>

          <div
            class="col-4"
            *ngIf="
              sheetMetalVals.processFlag.IsProcessTypeZincPlating ||
              sheetMetalVals.processFlag.IsProcessTypeChromePlating ||
              sheetMetalVals.processFlag.IsProcessTypeNickelPlating ||
              sheetMetalVals.processFlag.IsProcessTypeCopperPlating ||
              sheetMetalVals.processFlag.IsProcessTypeTinPlating ||
              sheetMetalVals.processFlag.IsProcessTypeGoldPlating ||
              sheetMetalVals.processFlag.IsProcessTypeSilverPlating ||
              sheetMetalVals.processFlag.IsProcessTypeR2RPlating ||
              sheetMetalVals.processFlag.IsProcessTypeGalvanization ||
              sheetMetalVals.processFlag.IsProcessTypePowderCoating ||
              sheetMetalVals.processFlag.IsProcessTypePowderPainting
            ">
            <label class="form-label no-wrap has-icon">
              <span
                class="label-text"
                *ngIf="!(sheetMetalVals.processFlag.IsProcessTypeGalvanization || sheetMetalVals.processFlag.IsProcessTypePowderCoating || sheetMetalVals.processFlag.IsProcessTypePowderPainting)">
                Plating Thickness (μm)
              </span>
              <span class="label-text" *ngIf="sheetMetalVals.processFlag.IsProcessTypeGalvanization || sheetMetalVals.processFlag.IsProcessTypePowderCoating">Coating Thickness (μm)</span>
              <span class="label-text" *ngIf="sheetMetalVals.processFlag.IsProcessTypePowderPainting">Painting Thickness (μm)</span>
              <app-info-tooltip [infoId]="'Part_Volume_sheet_metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'paintCoatingTickness'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.paintCoatingTickness.errors,
                'input-valid': f.paintCoatingTickness.valid && !f.paintCoatingTickness.dirty,
                'input-overridden': f.paintCoatingTickness.dirty && f.paintCoatingTickness.touched,
              }"
              class="form-control"
              formControlName="paintCoatingTickness"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div
            class="col-4"
            *ngIf="
              sheetMetalVals.processFlag.IsProcessTypeZincPlating ||
              sheetMetalVals.processFlag.IsProcessTypeChromePlating ||
              sheetMetalVals.processFlag.IsProcessTypeNickelPlating ||
              sheetMetalVals.processFlag.IsProcessTypeCopperPlating ||
              sheetMetalVals.processFlag.IsProcessTypeTinPlating ||
              sheetMetalVals.processFlag.IsProcessTypeGoldPlating ||
              sheetMetalVals.processFlag.IsProcessTypeSilverPlating ||
              sheetMetalVals.processFlag.IsProcessTypeR2RPlating ||
              sheetMetalVals.processFlag.IsProcessTypeGalvanization ||
              sheetMetalVals.processFlag.IsProcessTypePowderCoating ||
              sheetMetalVals.processFlag.IsProcessTypePowderPainting
            ">
            <label class="form-label no-wrap has-icon">
              <span
                class="label-text"
                *ngIf="!(sheetMetalVals.processFlag.IsProcessTypeGalvanization || sheetMetalVals.processFlag.IsProcessTypePowderCoating || sheetMetalVals.processFlag.IsProcessTypePowderPainting)">
                Weight of Plating (g)
              </span>
              <span class="label-text" *ngIf="sheetMetalVals.processFlag.IsProcessTypeGalvanization || sheetMetalVals.processFlag.IsProcessTypePowderCoating">Weight of Coating (g)</span>
              <span class="label-text" *ngIf="sheetMetalVals.processFlag.IsProcessTypePowderPainting">Weight of Painting (g)</span>

              <app-info-tooltip [infoId]="'Part_Volume_sheet_metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'pouringWeight'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.pouringWeight.errors,
                'input-valid': f.pouringWeight.valid && !f.pouringWeight.dirty,
                'input-overridden': f.pouringWeight.dirty && f.pouringWeight.touched,
              }"
              class="form-control"
              formControlName="pouringWeight"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div
            class="col-4 offset-4"
            *ngIf="
              !(
                (sheetMetalVals.processFlag.IsProcessTypeWelding && !sheetMetalVals.processFlag.IsProcessSpotWelding) ||
                sheetMetalVals.processFlag.IsProcessTypeZincPlating ||
                sheetMetalVals.processFlag.IsProcessTypeChromePlating ||
                sheetMetalVals.processFlag.IsProcessTypeNickelPlating ||
                sheetMetalVals.processFlag.IsProcessTypeCopperPlating ||
                sheetMetalVals.processFlag.IsProcessTypeTinPlating ||
                sheetMetalVals.processFlag.IsProcessTypeGoldPlating ||
                sheetMetalVals.processFlag.IsProcessTypeSilverPlating ||
                sheetMetalVals.processFlag.IsProcessTypeR2RPlating ||
                sheetMetalVals.processFlag.IsProcessTypeGalvanization ||
                sheetMetalVals.processFlag.IsProcessTypePowderCoating ||
                sheetMetalVals.processFlag.IsProcessTypePowderPainting
              )
            ">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Net Weight (g)</span>
              <app-info-tooltip [infoId]="'Net_Weight_Sheet_Metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'netWeight'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.netWeight.errors,
                'input-valid': f.netWeight.valid && !f.netWeight.dirty,
                'input-overridden': f.netWeight.dirty,
              }"
              class="form-control"
              formControlName="netWeight"
              [OnlyNumber]="true"
              (blur)="onBlurEvent($event)"
              min="0" />
          </div>

          <div class="col-4 ms-auto" *ngIf="!(sheetMetalVals.processFlag.IsProcessTypeWelding && !sheetMetalVals.processFlag.IsProcessSpotWelding)">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Material Utilisation %</span>
              <app-info-tooltip [infoId]="'Material_Utilisation_Sheet_Metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'utilisation'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.utilisation.errors,
                'input-valid': f.utilisation.valid && !f.utilisation.dirty,
                'input-overridden': f.utilisation.dirty,
              }"
              class="form-control"
              formControlName="utilisation"
              [OnlyNumber]="true"
              (blur)="onBlurEvent($event)"
              min="0" />
          </div>

          <div
            class="col-4"
            *ngIf="
              sheetMetalVals.processFlag.IsProcessTypeZincPlating ||
              sheetMetalVals.processFlag.IsProcessTypeChromePlating ||
              sheetMetalVals.processFlag.IsProcessTypeNickelPlating ||
              sheetMetalVals.processFlag.IsProcessTypeCopperPlating ||
              sheetMetalVals.processFlag.IsProcessTypeTinPlating ||
              sheetMetalVals.processFlag.IsProcessTypeGoldPlating ||
              sheetMetalVals.processFlag.IsProcessTypeSilverPlating ||
              sheetMetalVals.processFlag.IsProcessTypeR2RPlating ||
              sheetMetalVals.processFlag.IsProcessTypeGalvanization ||
              sheetMetalVals.processFlag.IsProcessTypePowderCoating ||
              sheetMetalVals.processFlag.IsProcessTypePowderPainting
            ">
            <label class="form-label no-wrap has-icon">
              <span
                class="label-text"
                *ngIf="!(sheetMetalVals.processFlag.IsProcessTypeGalvanization || sheetMetalVals.processFlag.IsProcessTypePowderCoating || sheetMetalVals.processFlag.IsProcessTypePowderPainting)">
                Plating weight with losses (g)
              </span>
              <span class="label-text" *ngIf="sheetMetalVals.processFlag.IsProcessTypeGalvanization || sheetMetalVals.processFlag.IsProcessTypePowderCoating">Coating weight with losses (g)</span>
              <span class="label-text" *ngIf="sheetMetalVals.processFlag.IsProcessTypePowderPainting">Painting weight with losses (g)</span>
              <app-info-tooltip [infoId]="'Part_Volume_sheet_metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'oxidationLossWeight'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.oxidationLossWeight.errors,
                'input-valid': f.oxidationLossWeight.valid && !f.oxidationLossWeight.dirty,
                'input-overridden': f.oxidationLossWeight.dirty && f.oxidationLossWeight.touched,
              }"
              class="form-control"
              formControlName="oxidationLossWeight"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>
        </div>
      </div>
      <div class="card-body" *ngIf="sheetMetalVals.processFlag.IsProcessTubeLaserCutting">
        <!-- #region Tube Laser Cutting Details -->
        <div class="row">
          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Part Envelope Length (' + sheetMetalVals.conversionValue + ')' : 'Part Envelope Length(mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Sheetmetal_Envelope_Length_mm'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'length'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.length.errors,
                'input-valid': f.length.valid && !f.length.dirty,
                'input-overridden': f.length.dirty && f.length.touched,
              }"
              class="form-control"
              formControlName="length"
              [OnlyNumber]="true"
              placeholder="Length"
              (blur)="calculateCost()"
              min="0" />
          </div>
          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Part Envelope Width (' + sheetMetalVals.conversionValue + ')' : 'Part Envelope Width(mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Sheetmetal_Envelope_Width_mm'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'width'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.width.errors,
                'input-valid': f.width.valid && !f.width.dirty,
                'input-overridden': f.width.dirty && f.width.touched,
              }"
              class="form-control"
              formControlName="width"
              [OnlyNumber]="true"
              placeholder="Width"
              (blur)="calculateCost()"
              min="0" />
          </div>
          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Part Envelope Height (' + sheetMetalVals.conversionValue + ')' : 'Part Envelope Height(mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Sheetmetal_Envelope_Height_mm'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'height'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.height.errors,
                'input-valid': f.height.valid && !f.height.dirty,
                'input-overridden': f.height.dirty && f.height.touched,
              }"
              class="form-control"
              formControlName="height"
              [OnlyNumber]="true"
              placeholder="Height"
              (blur)="calculateCost()"
              min="0" />
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Tube Cross Section</span>
              <!-- <app-info-tooltip
                [infoId]="
                  sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress
                    ? 'Edge_Allowances_staging_progressive'
                    : 'Edge_Allowances'
                "
                popoverClass="custom-popover-with-img"></app-info-tooltip> -->
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partShape'"></app-field-comment>
            <select formControlName="partShape" class="form-control" (change)="calculateCost()">
              <option value="" selected>-------Select Tube Cross Section--------</option>
              <option value="Rectangular">Rectangular</option>
              <option value="Circular">Circular</option>
            </select>
          </div>
          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Tube Length (' + sheetMetalVals.conversionValue + ')' : 'Tube Length(mm)' }}
              </span>
              <!-- <app-info-tooltip [infoId]="'Sheetmetal_Envelope_Length_mm'"></app-info-tooltip> -->
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coilLength'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.coilLength.errors,
                'input-valid': f.coilLength.valid && !f.coilLength.dirty,
                'input-overridden': f.coilLength.dirty && f.coilLength.touched,
              }"
              class="form-control"
              formControlName="coilLength"
              [OnlyNumber]="true"
              placeholder="Tube Length"
              (blur)="calculateCost()"
              min="0" />
          </div>
          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Tube Thickness (' + sheetMetalVals.conversionValue + ')' : 'Tube Thickness Height(mm)' }}
              </span>
              <!-- <app-info-tooltip [infoId]="'Sheetmetal_Envelope_Height_mm'"></app-info-tooltip> -->
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'paintCoatingTickness'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.paintCoatingTickness.errors,
                'input-valid': f.paintCoatingTickness.valid && !f.paintCoatingTickness.dirty,
                'input-overridden': f.paintCoatingTickness.dirty && f.paintCoatingTickness.touched,
              }"
              class="form-control"
              formControlName="paintCoatingTickness"
              [OnlyNumber]="true"
              placeholder="Thickness"
              (blur)="calculateCost()"
              min="0" />
          </div>
        </div>

        <div class="row">
          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Tube Stock Length (' + sheetMetalVals.conversionValue + ')' : 'Tube Stock Length (mm)' }}
              </span>
              <!-- <app-info-tooltip [infoId]="'Sheetmetal_Envelope_Width_mm'"></app-info-tooltip> -->
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coilWidth'"></app-field-comment>

            <select
              formControlName="coilWidth"
              class="form-control"
              [ngClass]="{
                'input-mandatory': f.coilWidth.errors,
                'input-valid': f.coilWidth.valid && !f.coilWidth.dirty,
                'input-overridden': f.coilWidth.dirty && f.coilWidth.touched,
              }"
              (change)="calculateCost('coilWidth')">
              <option value="3000">3000</option>
              <option value="5000">5000</option>
              <option value="6000" selected>6000</option>
            </select>
          </div>

          <div class="col-4">
            <div class="form-group">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{ sheetMetalVals.isEnableUnitConversion ? 'Side A (' + sheetMetalVals.conversionValue + ')' : 'Side A (mm)' }}
                </span>
                <!-- <app-info-tooltip
                  [infoId]="
                    sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress
                      ? 'Edge_Allowances_staging_progressive'
                      : 'Edge_Allowances_MM'
                  "
                  popoverClass="custom-popover-with-img"></app-info-tooltip> -->
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'moldBoxLength'"></app-field-comment>
              <input type="number" class="form-control" formControlName="moldBoxLength" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>
          </div>

          <div class="col-4">
            <div class="form-group">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{ sheetMetalVals.isEnableUnitConversion ? 'Side B (' + sheetMetalVals.conversionValue + ')' : 'Side B (mm)' }}
                </span>
                <!-- <app-info-tooltip
                  [infoId]="
                    sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress
                      ? 'Edge_Allowances_staging_progressive'
                      : 'Edge_Allowances_MM'
                  "
                  popoverClass="custom-popover-with-img"></app-info-tooltip> -->
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'moldBoxWidth'"></app-field-comment>
              <input type="number" class="form-control" formControlName="moldBoxWidth" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-4">
            <div class="form-group">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{ sheetMetalVals.isEnableUnitConversion ? 'Part Cutting Allowance (' + sheetMetalVals.conversionValue + ')' : 'Part Cutting Allowance (mm)' }}
                </span>
                <!-- <app-info-tooltip
                  [infoId]="
                    sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress
                      ? 'Edge_Allowances_staging_progressive'
                      : 'Edge_Allowances_MM'
                  "
                  popoverClass="custom-popover-with-img"></app-info-tooltip> -->
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'runnerDia'"></app-field-comment>
              <input type="number" class="form-control" formControlName="runnerDia" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Parts per Stock/Bar (Nos)</span>
              <app-info-tooltip [infoId]="'Parts_Per_Sheet_Coil'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partsPerCoil'"></app-field-comment>
            <input type="number" class="form-control" placeholder="Enter Parts per Stock (Nos)" formControlName="partsPerCoil" (blur)="calculateCost()" />
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Tube Stock Weight (Gms)</span>
              <app-info-tooltip [infoId]="'Parts_Per_Sheet_Coil'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'moldSandWeight'"></app-field-comment>
            <input type="number" class="form-control" placeholder="Enter Parts per Stock (Nos)" formControlName="moldSandWeight" (blur)="calculateCost()" />
          </div>
        </div>

        <div class="row">
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                Part Surface Area
                {{ sheetMetalVals.isEnableUnitConversion ? '(' + sheetMetalVals.conversionValue + '^2)' : '(mm^2)' }}
              </span>
              <app-info-tooltip [infoId]="'Part_Surface_Area'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partSurfaceArea'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.partSurfaceArea.errors,
                'input-valid': f.partSurfaceArea.valid && !f.partSurfaceArea.dirty,
                'input-overridden': f.partSurfaceArea.dirty && f.partSurfaceArea.touched,
              }"
              class="form-control"
              formControlName="partSurfaceArea"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                Part Volume
                {{ sheetMetalVals.isEnableUnitConversion ? '(' + sheetMetalVals.conversionValue + '^3)' : '(mm^3)' }}
              </span>
              <app-info-tooltip [infoId]="'Part_Volume_sheet_metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partVolume'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.partVolume.errors,
                'input-valid': f.partVolume.valid && !f.partVolume.dirty,
                'input-overridden': f.partVolume.dirty && f.partVolume.touched,
              }"
              class="form-control"
              formControlName="partVolume"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Net Weight (g)</span>
              <app-info-tooltip [infoId]="'Net_Weight_Sheet_Metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'netWeight'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.netWeight.errors,
                'input-valid': f.netWeight.valid && !f.netWeight.dirty,
                'input-overridden': f.netWeight.dirty,
              }"
              class="form-control"
              formControlName="netWeight"
              [OnlyNumber]="true"
              (blur)="onBlurEvent($event)"
              min="0" />
          </div>
        </div>

        <div class="row">
          <div class="col-4 ms-auto">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Material Utilisation %</span>
              <app-info-tooltip [infoId]="'Material_Utilisation_Sheet_Metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'utilisation'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.utilisation.errors,
                'input-valid': f.utilisation.valid && !f.utilisation.dirty,
                'input-overridden': f.utilisation.dirty,
              }"
              class="form-control"
              formControlName="utilisation"
              [OnlyNumber]="true"
              (blur)="onBlurEvent($event)"
              min="0" />
          </div>
        </div>
      </div>
    </div>

    <!-- Welding  -->
    <div id="_matmoredetailsCore" class="mt-3" *ngIf="sheetMetalVals.processFlag.IsProcessTypeWelding && !sheetMetalVals.processFlag.IsProcessSpotWelding">
      <div class="card">
        <div class="card-header">Welding Details</div>
        <div class="card-body">
          <ng-container formArrayName="materialPkgs">
            <ng-container *ngFor="let weldSubMaterials of weldingFormArray?.controls; let index = index">
              <div [formGroupName]="index">
                <div class="row p-t-1">
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">Weld Type</span>
                      <app-info-tooltip [infoId]="'Welding_Weld_Type'"></app-info-tooltip>
                    </label>
                    <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coreShape'"></app-field-comment>
                    <select formControlName="coreShape" class="form-control" (change)="calculateCost('coreShape', index)">
                      <option value="" selected>-------Select Type Of Weld--------</option>
                      <option *ngFor="let option of typeOfWeldList" [value]="option.id">
                        {{ option.name }}
                      </option>
                    </select>
                  </div>
                  <div class="col-4">
                    <label class="form-label no-wrap has-icon">
                      <span class="label-text">
                        {{ sheetMetalVals.isEnableUnitConversion ? 'Weld Size (' + sheetMetalVals.conversionValue + ')' : 'Weld Size (mm)' }}
                      </span>
                      <app-info-tooltip [infoId]="'Welding_Weld_Size'"></app-info-tooltip>
                    </label>
                    <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coreHeight'"></app-field-comment>
                    <input type="number" formControlName="coreHeight" (blur)="calculateCost()" class="form-control" [OnlyNumber]="true" min="0" (blur)="calculateCost('coreHeight', index)" />
                  </div>

                  <div class="col-4 icon-btn d-flex align-items-center justify-content-between">
                    <h6 (click)="toggleCollapse(index)" style="cursor: pointer">
                      Weld {{ index + 1 }}
                      <mat-icon>
                        {{ collapsedSections[index] ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}
                      </mat-icon>
                    </h6>
                    <a mat-icon-button class="float-end" (click)="onDeleteSubWeld(index)" matTooltip="Delete Core" matTooltipPosition="above">
                      <mat-icon class="warn !text-black !w-4 !h-4" svgIcon="delete_icon"></mat-icon>
                    </a>
                  </div>

                  <!-- <div class="col-4 icon-btn">
                    <h6>Weld {{ index + 1 }}</h6>
                    <a mat-icon-button class="float-end" (click)="onDeleteSubWeld(index)" matTooltip="Delete Core" matTooltipPosition="above">
                      <mat-icon class="warn !text-black !w-4 !h-4" svgIcon="delete_icon"></mat-icon>
                    </a>
                  </div> -->
                </div>
                <div class="weld-details" *ngIf="!collapsedSections[index]">
                  <div class="row mt-3">
                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ sheetMetalVals.isEnableUnitConversion ? 'Wire Dia (' + sheetMetalVals.conversionValue + ')' : 'Wire Dia (mm)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Welding_Wire_Dia'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coreWidth'"></app-field-comment>
                      <input type="number" formControlName="coreWidth" (blur)="calculateCost()" class="form-control" [OnlyNumber]="true" min="0" readonly="readonly" />
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ sheetMetalVals.isEnableUnitConversion ? 'Weld Element Size (' + sheetMetalVals.conversionValue + ')' : 'Weld Element Size (mm)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Welding_Weld_Element_Size'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coreWeight'"></app-field-comment>
                      <input type="number" formControlName="coreWeight" (blur)="calculateCost()" class="form-control" [OnlyNumber]="true" min="0" />
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">No. of Weld Passes (Qty)</span>
                        <app-info-tooltip [infoId]="'Welding_No_Of_Weld_Passes'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'noOfCore'"></app-field-comment>
                      <input type="number" formControlName="noOfCore" (blur)="calculateCost('noOfCore', index)" class="form-control" [OnlyNumber]="true" min="0" (blur)="calculateCost()" />
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ sheetMetalVals.isEnableUnitConversion ? 'Weld Length (' + sheetMetalVals.conversionValue + ')' : 'Weld Length (mm)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Welding_Weld_Length'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coreLength'"></app-field-comment>
                      <input type="number" formControlName="coreLength" (blur)="calculateCost()" class="form-control" [OnlyNumber]="true" min="0" />
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Weld Side</span>
                        <app-info-tooltip [infoId]="'Welding_Weld_Side'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'weldSide'"></app-field-comment>
                      <select formControlName="coreArea" class="form-control" (change)="calculateCost('weldSide', index)">
                        <option value="1" selected>Single</option>
                        <option value="2">Both</option>
                      </select>
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Weld Places (Qty)</span>
                        <app-info-tooltip [infoId]="'Welding_Weld_Places'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coreVolume'"></app-field-comment>
                      <input type="number" formControlName="coreVolume" (blur)="calculateCost()" class="form-control" [OnlyNumber]="true" min="0" />
                    </div>
                  </div>

                  <div class="row mt-3">
                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">Grind Flush</span>
                        <!-- <app-info-tooltip [infoId]="'Welding_Weld_Type'"></app-info-tooltip> -->
                      </label>
                      <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'grindFlush'"></app-field-comment>
                      <select formControlName="grindFlush" class="form-control" (change)="calculateCost('grindFlush', index)">
                        <option value="0" selected>No</option>
                        <option value="1" selected>Yes</option>
                      </select>
                    </div>

                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ sheetMetalVals.isEnableUnitConversion ? 'Total Weld Length/Weld (' + sheetMetalVals.conversionValue + ')' : 'Total Weld Length/Weld (mm)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Welding_Total_Weld_Length_Per_Weld'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'weldSide'"></app-field-comment>
                      <input type="number" formControlName="weldSide" (blur)="calculateCost()" class="form-control" [OnlyNumber]="true" min="0" readonly="readonly" />
                    </div>
                    <div class="col-4">
                      <label class="form-label no-wrap has-icon">
                        <span class="label-text">
                          {{ sheetMetalVals.isEnableUnitConversion ? ' Weld Volume (' + sheetMetalVals.conversionValue + ')^3' : ' Weld Volume (mm^3)' }}
                        </span>
                        <app-info-tooltip [infoId]="'Welding_Weld_Volume'"></app-info-tooltip>
                      </label>
                      <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coreSandPrice'"></app-field-comment>
                      <input type="number" formControlName="coreSandPrice" (blur)="calculateCost()" class="form-control" [OnlyNumber]="true" min="0" readonly="readonly" />
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </ng-container>
          <div class="col-12 links-block" style="justify-content: end">
            <a href="javascript:void(0)" (click)="addMoreWeld()">Add Weld</a>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="row">
        <div class="col-4 center">
          <label class="form-label no-wrap has-icon">
            <span class="label-text font-medium">Net Material cost($)</span>
            <app-info-tooltip [infoId]="'Net_Material_Cost'"></app-info-tooltip>
          </label>
          <input type="number" class="form-control text-base font-semibold" formControlName="netMaterialCost" readonly />
        </div>
      </div>
    </div>

    <div
      class="card mt-3"
      *ngIf="
        !(
          sheetMetalVals.processFlag.IsProcessMigWelding ||
          sheetMetalVals.processFlag.IsProcessTigWelding ||
          sheetMetalVals.processFlag.IsProcessTypeZincPlating ||
          sheetMetalVals.processFlag.IsProcessTypeChromePlating ||
          sheetMetalVals.processFlag.IsProcessTypeNickelPlating ||
          sheetMetalVals.processFlag.IsProcessTypeCopperPlating ||
          sheetMetalVals.processFlag.IsProcessTypeTinPlating ||
          sheetMetalVals.processFlag.IsProcessTypeGoldPlating ||
          sheetMetalVals.processFlag.IsProcessTypeSilverPlating ||
          sheetMetalVals.processFlag.IsProcessTypeR2RPlating ||
          sheetMetalVals.processFlag.IsProcessTypeGalvanization
        )
      ">
      <div class="card-header">Material Cost Details</div>
      <div class="card-body">
        <div class="col-12">
          <div class="row">
            <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Part Gross weight(g)</span>
                <app-info-tooltip [infoId]="'Sheetmetal_Part_Gross_Weight_Per_Part'"></app-info-tooltip>
              </label>
              <input type="number" class="form-control" readonly="readonly" formControlName="grossWeight" id="grossWeight" />
            </div>

            <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Part Scrap Weight(g)</span>
                <app-info-tooltip [infoId]="'Sheetmetal_Part_Scrap_Weight_Per_Part'"></app-info-tooltip>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'scrapWeight'"></app-field-comment>
              <input type="number" class="form-control" formControlName="scrapWeight" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>

            <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Scrap Recovery(%)</span>
                <app-info-tooltip [infoId]="'Sheetmetal_Scrap_Recovery_Per_Part_Percentage'"></app-info-tooltip>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'scrapRecovery'"></app-field-comment>
              <input type="number" class="form-control" formControlName="scrapRecovery" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>

            <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Part Gross Material Cost($)</span>
                <app-info-tooltip [infoId]="'Sheetmetal_Gross_Material_Cost_Per_Part'"></app-info-tooltip>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'grossMaterialCost'"></app-field-comment>
              <input type="number" class="form-control" readonly="readonly" formControlName="grossMaterialCost" />
            </div>

            <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Part Scrap Recovery($)</span>
                <app-info-tooltip [infoId]="'Sheetmetal_Part_Scrap_Recovery_Cost'"></app-info-tooltip>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'scrapRecCost'"></app-field-comment>
              <input type="number" class="form-control" readonly="readonly" formControlName="scrapRecCost" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card mt-3" *ngIf="sheetMetalVals.processFlag.IsProcessMigWelding || sheetMetalVals.processFlag.IsProcessTigWelding">
      <div class="card-header">Material Cost Details</div>
      <div class="card-body">
        <div class="col-12">
          <div class="row">
            <!-- <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Density (g/cc)</span>
                <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Density')">
                  <mat-icon class="info-icon" svgIcon="information"></mat-icon>
                </span>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'density'"></app-field-comment>
              <input type="number" formControlName="density" class="form-control" (blur)="calculateCost()" />
            </div> -->

            <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{ sheetMetalVals.isEnableUnitConversion ? ' Total Weld Length (' + sheetMetalVals.conversionValue + ')' : ' Total Weld Length (mm3)' }}
                </span>
                <app-info-tooltip [infoId]="'Welding_Total_Weld_Length'"></app-info-tooltip>
              </label>
              <input type="number" class="form-control" formControlName="totalWeldLength" id="totalWeldLength" (blur)="calculateCost()" />
            </div>

            <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Total Weld Material Weight (g)</span>
                <app-info-tooltip [infoId]="'Welding_Total_Weld_Material_Weight'"></app-info-tooltip>
              </label>
              <input type="number" class="form-control" formControlName="grossWeight" id="grossWeight" (blur)="calculateCost()" />
            </div>

            <div class="col-4">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Efficiency%:</span>
                <app-info-tooltip [infoId]="'Machine_Efficiency_Percentage'"></app-info-tooltip>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'effeciency'"></app-field-comment>
              <input type="number" class="form-control" formControlName="effeciency" [OnlyNumber]="true" placeholder="effeciency" (blur)="calculateCost()" min="0" />
            </div>
            <div class="col-4 position-relative">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">Weld Bead Weight With Wastage (g)</span>
                <app-info-tooltip [infoId]="'Welding_Weld_Bead_Weight_With_Wastage'"></app-info-tooltip>
              </label>
              <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'weldWeightWastage'"></app-field-comment>
              <input type="number" class="form-control" formControlName="weldWeightWastage" [OnlyNumber]="true" placeholder="WeldWeightWastage" (blur)="calculateCost()" min="0" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- #endregion Tab 1 -->

  <ng-container *ngIf="tab === 'Nesting Layout'">
    <!-- Nesting Type -->
    <div class="card mt-3">
      <div class="card-body">
        <div class="row">
          <!-- Uncomment this when nesting type is implemented -->
          <!-- <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Nesting Type</span>
              <app-info-tooltip [infoId]="'Nesting_Type'"></app-info-tooltip>
            </label>
            <select class="form-control">
              <option value="Multi Part Nesting" selected>Multi Part Nesting</option>
              <option value="Single Part Nesting">Single Part Nesting</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="card mt-3">
      <div class="card-header">Nesting Part Details</div>
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Project Number</span>
              <app-info-tooltip [infoId]="'Project_Number'"></app-info-tooltip>
            </label>
            <select class="form-control">
              <option value="Assembly project 2627" selected>Assembly project 2627</option>
              <option value="Assembly project 2628">Assembly project 2628</option>
            </select>
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Part Selection</span>
              <app-info-tooltip [infoId]="'Part_Selection'"></app-info-tooltip>
            </label>
            <p-multiSelect
              [(ngModel)]="selectedParts"
              [ngModelOptions]="{ standalone: true }"
              [options]="availableParts"
              optionLabel="name"
              optionValue="id"
              placeholder="No Parts"
              [showClear]="true"
              display="chip"
              [filter]="true"
              filterBy="name"
              appendTo="body"
              panelStyleClass="nesting-part-multiselect-panel"
              styleClass="w-100 p-multiselect">
              <ng-template let-option #item>
                <div class="flex items-center gap-2">
                  <div class="thumbnail-img">
                    <img [src]="option.image || 'assets/images/no-image-available-thumb.png'" [alt]="option.name" />
                  </div>
                  <div>{{ option.name }}</div>
                </div>
              </ng-template>
            </p-multiSelect>
          </div>
          <div class="col-4 flex items-end">
            <button class="btn btn-outline-primary nesting-part-btn px-4 mt-auto">
              <mat-icon svgIcon="plus-add-icon"></mat-icon>
              <span class="ms-1">Add Part</span>
            </button>
          </div>
        </div>

        <div class="common-table-container common-style-form">
          <div class="common-table-inner-wrap">
            <div class="table-container">
              <p-table
                [value]="nestingParts"
                scrollable="true"
                [scrollHeight]="'flex'"
                [tableStyle]="{ 'min-width': '60rem' }"
                styleClass="p-datatable-striped"
                [paginator]="nestingParts?.length > 0"
                [scrollable]="false"
                [rows]="10"
                [showCurrentPageReport]="true"
                [rowsPerPageOptions]="[10, 25, 50]"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                class="custom-p-table nesting-parts-table"
                [paginatorDropdownAppendTo]="'body'">
                <ng-template pTemplate="header">
                  <tr>
                    <th class="text-center sticky-col sticky-left !pr-4">#</th>
                    <th>Part ID</th>
                    <th>Project Number</th>
                    <th class="text-center">Image</th>
                    <th>Part Description</th>
                    <th>Part Material</th>
                    <th>Thickness</th>
                    <th>Width</th>
                    <th>Length</th>
                    <th>Annual Volume</th>
                    <th class="text-center sticky-col sticky-right">Actions</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-item let-i="rowIndex">
                  <tr>
                    <td class="sticky-col sticky-left !pr-4">
                      <div class="d-flex align-items-center">
                        <label class="edit-radio d-flex align-items-center justify-content-center">
                          <input type="radio" name="nestingPartSelector" [value]="item.id" />
                        </label>
                        <span class="ms-1">{{ i + 1 }}</span>
                      </div>
                    </td>
                    <td>{{ item.partId }}</td>
                    <td matTooltipClass="gray-tooltip" matTooltipPosition="below" [matTooltipShowDelay]="300" [matTooltip]="item.projectNumber">
                      <div class="truncate-2-lines">{{ item.projectNumber }}</div>
                    </td>
                    <td class="text-center">
                      <div class="img-div flex items-center justify-center">
                        <img [src]="item.image" alt="Part image" (error)="item.image = 'assets/images/no-image-available-thumb.png'" />
                      </div>
                    </td>
                    <td matTooltipClass="gray-tooltip" matTooltipPosition="below" [matTooltipShowDelay]="300" [matTooltip]="item.partDescription">
                      <div class="truncate-2-lines">{{ item.partDescription }}</div>
                    </td>
                    <td>{{ item.partMaterial }}</td>
                    <td>{{ item.thickness }}</td>
                    <td>{{ item.width }}</td>
                    <td>{{ item.length }}</td>
                    <td>{{ item.annualVolume }}</td>
                    <td class="text-center sticky-col sticky-right">
                      <button type="button" class="p-icon-delete icon-btn" title="Delete">
                        <mat-icon svgIcon="delete_icon"></mat-icon>
                      </button>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td colspan="10" class="!py-10 !px-5">No parts available</td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card mt-3">
      <div class="card-header">Part Details</div>
      <div class="card-body">
        <div class="row">
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Part ID</span>
              <app-info-tooltip [infoId]="'Part_ID'"></app-info-tooltip>
            </label>
            <input type="text" class="form-control" value="Part A" />
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Project Number</span>
              <app-info-tooltip [infoId]="'Project_Number'"></app-info-tooltip>
            </label>
            <input type="text" class="form-control" value="Assembly project 2627" />
          </div>
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Part Material</span>
              <app-info-tooltip [infoId]="'Part_Material'"></app-info-tooltip>
            </label>
            <input type="text" class="form-control" value="Copper" />
          </div>
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Annual Volume</span>
              <app-info-tooltip [infoId]="'Annual_Volume'"></app-info-tooltip>
            </label>
            <input type="number" class="form-control" value="200" />
          </div> -->
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Unfolded Length (' + sheetMetalVals.conversionValue + ')' : 'Unfolded Length (mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Unfolded_Length_Sheet_Metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'unfoldedLength'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.unfoldedLength.errors,
                'input-valid': f.unfoldedLength.valid && !f.unfoldedLength.dirty,
                'input-overridden': f.unfoldedLength.dirty && f.unfoldedLength.touched,
              }"
              class="form-control"
              formControlName="unfoldedLength"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Unfolded Width (' + sheetMetalVals.conversionValue + ')' : 'Unfolded Width (mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Unfolded_Width_Sheet_Metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'unfoldedWidth'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.unfoldedWidth.errors,
                'input-valid': f.unfoldedWidth.valid && !f.unfoldedWidth.dirty,
                'input-overridden': f.unfoldedWidth.dirty && f.unfoldedWidth.touched,
              }"
              class="form-control"
              formControlName="unfoldedWidth"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Thickness (' + sheetMetalVals.conversionValue + ')' : 'Thickness (mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Thickness_Sheet_Metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'thickness'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.thickness.errors,
                'input-valid': f.thickness.valid,
              }"
              class="form-control"
              formControlName="thickness"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
            <!-- Uncomment this when nesting type is implemented -->
            <!-- </div>
        </div>
      </div> -->
          </div>
          <!-- Uncomment this when nesting type is implemented -->
          <!-- <div class="card mt-3">
      <div class="card-header">Nesting Layout</div>
      <div class="card-body">
        <div class="row"> -->
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Sheet/Coil Length (' + sheetMetalVals.conversionValue + ')' : 'Sheet/Coil Length (mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Sheet_Coil_Length'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coilLength'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.coilLength.errors,
                'input-valid': f.coilLength.valid && !f.coilLength.dirty,
                'input-overridden': f.coilLength.dirty && f.coilLength.touched,
              }"
              class="form-control"
              (blur)="calculateCost()"
              placeholder="Enter Sheet/coil Length (mm)"
              formControlName="coilLength" />
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Sheet/Coil Width (' + sheetMetalVals.conversionValue + ')' : 'Sheet/Coil Width (mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Sheet_Coil_Width'"></app-info-tooltip>
            </label>

            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'coilWidth'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.coilWidth.errors,
                'input-valid': f.coilWidth.valid && !f.coilWidth.dirty,
                'input-overridden': f.coilWidth.dirty && f.coilWidth.touched,
              }"
              class="form-control"
              (blur)="validateUnfoldLength($event)"
              placeholder="Enter Sheet Width (mm)"
              formControlName="coilWidth" />
          </div>
        </div>
        <!-- <div class="row">
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Edge Allowances</span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Edge_Allowances')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'runnerType'"></app-field-comment>
            <select formControlName="runnerType" class="form-control" (change)="calculateCost()">
              <option value="" selected>-------Select Edge Allowances--------</option>
              <option value="Uniform">Uniform</option>
              <option value="Non Uniform">Non Uniform</option>
            </select>
          </div>
        </div> -->
        <div class="row">
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <div class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Part Allowance (' + sheetMetalVals.conversionValue + ')' : 'Part Allowance (mm)' }}
              </div>
              <app-info-tooltip
                [infoId]="
                  sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress
                    ? 'Part_Allowances_staging_progressive'
                    : 'Part_Allowances'
                "
                popoverClass="custom-popover-with-img"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partAllowance'"></app-field-comment>
            <input type="number" class="form-control" formControlName="partAllowance" [OnlyNumber]="true" placeholder="Part Allowance" (blur)="calculateCost()" />
          </div>

          <div class="col-4" *ngIf="sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Edge Allowances</span>
              <app-info-tooltip
                [infoId]="
                  sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress
                    ? 'Edge_Allowances_staging_progressive'
                    : 'Edge_Allowances'
                "
                popoverClass="custom-popover-with-img"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partShape'"></app-field-comment>
            <select formControlName="partShape" class="form-control" (change)="calculateCost()">
              <option value="" selected>-------Select Edge Allowances--------</option>
              <option value="One Sided">One Sided</option>
              <option value="Two Sided">Two Sided</option>
              <option value="Not Applicable" *ngIf="sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessTransferPress">Not Applicable</option>
            </select>
          </div>

          <div class="col-4">
            <div class="form-group">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{ sheetMetalVals.isEnableUnitConversion ? 'Edge Allowance (' + sheetMetalVals.conversionValue + ')' : 'Edge Allowance (mm)' }}
                </span>
                <app-info-tooltip
                  [infoId]="
                    sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress
                      ? 'Edge_Allowances_staging_progressive'
                      : 'Edge_Allowances_MM'
                  "
                  popoverClass="custom-popover-with-img"></app-info-tooltip>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'moldBoxLength'"></app-field-comment>
              <input type="number" class="form-control" formControlName="moldBoxLength" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>
          </div>

          <!-- <div class="col-4" *ngIf="sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive">
            <div class="form-group">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{
                    sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive
                      ? sheetMetalVals.isEnableUnitConversion
                        ? 'Guide/Edge Allowance (' + sheetMetalVals.conversionValue + ')'
                        : 'Guide/Edge Allowance (mm)'
                      : sheetMetalVals.isEnableUnitConversion
                        ? 'Edge Allowance(' + sheetMetalVals.conversionValue + ')'
                        : 'Edge Allowance(mm)'
                  }}
                </span>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'moldBoxWidth'"></app-field-comment>
              <input type="number" class="form-control" formControlName="moldBoxWidth" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>
          </div> -->
        </div>
        <!-- <div class="row">
          <div class="col-4">
            <div class="form-group">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{ sheetMetalVals.isEnableUnitConversion ? 'Top Edge Allowance(S)(' + sheetMetalVals.conversionValue + ')' : 'Top Edge Allowance(S)(mm)' }}
                </span>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'moldBoxHeight'"></app-field-comment>
              <input type="number" class="form-control" formControlName="moldBoxHeight" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>
          </div>
          <div class="col-4">
            <div class="form-group">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{ sheetMetalVals.isEnableUnitConversion ? 'Right Edge Allowance(N)(' + sheetMetalVals.conversionValue + ')' : 'Right Edge Allowance(N)(mm)' }}
                </span>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'moldSandWeight'"></app-field-comment>
              <input type="number" class="form-control" formControlName="moldSandWeight" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>
          </div>
        </div> -->
        <div class="row" *ngIf="!(sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress)">
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Clamping Allowances</span>
              <app-info-tooltip [infoId]="'Clamping_Allowances'" container="body" popoverClass="custom-popover-with-img"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partShape'"></app-field-comment>
            <select formControlName="partShape" class="form-control" (change)="onChangeClampingAllownces($event)">
              <option value="" selected>-------Select Clamping Allowances--------</option>
              <option value="Applicable">Applicable</option>
              <option value="Not Applicable">Not Applicable</option>
            </select>
          </div>
          <div class="col-4">
            <div class="form-group">
              <label class="form-label no-wrap has-icon">
                <span class="label-text">
                  {{ sheetMetalVals.isEnableUnitConversion ? 'Bottom Clamping (' + sheetMetalVals.conversionValue + ')' : 'Bottom Clamping (mm)' }}
                </span>
                <app-info-tooltip [infoId]="'Sheetmetal_Bottom_Clamping'"></app-info-tooltip>
              </label>
              <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'runnerDia'"></app-field-comment>
              <input type="number" class="form-control" formControlName="runnerDia" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
            </div>
          </div>

          <div class="col-4 position-relative">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Left Clamping (' + sheetMetalVals.conversionValue + ')' : 'Left Clamping (mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Sheetmetal_Left_Clamping'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'runnerLength'"></app-field-comment>
            <input type="number" class="form-control" formControlName="runnerLength" [OnlyNumber]="true" (blur)="calculateCost()" min="0" />
          </div>
        </div>

        <div class="row">
          <div class="col-4" *ngIf="sheetMetalVals.processFlag.IsProcessStampingStage || sheetMetalVals.processFlag.IsProcessStampingProgressive || sheetMetalVals.processFlag.IsProcessTransferPress">
            <label class="form-label has-icon no-wrap">
              <span class="label-text">Strip Layout</span>
              <app-info-tooltip [infoId]="'Sheetmetal_Strip_Layout'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'typeOfCable'"></app-field-comment>
            <select formControlName="typeOfCable" class="form-control" (change)="calculateCost()">
              <option value="" selected>-------Select Strip Layout--------</option>
              <option value="1">Single</option>
              <option value="2">Mirror</option>
            </select>
          </div>

          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">
                {{ sheetMetalVals.isEnableUnitConversion ? 'Parts per Sheet/Coil (' + sheetMetalVals.conversionValue + ')' : 'Parts per Sheet/Coil(mm)' }}
              </span>
              <app-info-tooltip [infoId]="'Parts_Per_Sheet_Coil'"></app-info-tooltip>
            </label>
            <app-field-comment class="position-absolute right-top-comment" [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'partsPerCoil'"></app-field-comment>
            <input type="number" class="form-control" placeholder="Enter Parts per Sheet (mm)" formControlName="partsPerCoil" (blur)="calculateCost()" />
          </div>
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Material Utilisation %</span>
              <app-info-tooltip [infoId]="'Material_Utilisation_Sheet_Metal'"></app-info-tooltip>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'utilisation'"></app-field-comment>
            <input
              type="number"
              [ngClass]="{
                'input-mandatory': f.utilisation.errors,
                'input-valid': f.utilisation.valid && !f.utilisation.dirty,
                'input-overridden': f.utilisation.dirty,
              }"
              class="form-control"
              formControlName="utilisation"
              [OnlyNumber]="true"
              (blur)="calculateCost()"
              min="0" />
          </div>
        </div>
        <!-- Uncomment this when nesting type is implemented -->
        <!-- <div class="row mt-3">
          <div class="col-12">
            <div class="ml-2">
              <button class="btn btn-outline-primary nesting-part-btn">
                <mat-icon svgIcon="play-icon"></mat-icon>
                <span class="ms-1">Run Nesting</span>
              </button>
            </div>
          </div>
        </div> -->
      </div>
    </div>
    <div class="card mt-3">
      <div class="card-header pb-0">Nesting View</div>
      <div class="card-body">
        <div class="row">
          <div class="col-4">
            <a href="javascript:void(0)" class="link-info" (click)="showUnfoldedPart()">View Unfolded Part</a>
          </div>
          <div class="col-4 text-center">
            <a href="javascript:void(0)" class="ms-1 link-info" (click)="showNestingAlgo()">View Nesting</a>
          </div>
          <div class="col-4 text-end" *ngIf="!isProduction">
            <a href="javascript:void(0)" class="ms-1 link-info" (click)="showNestingAlgoNew()">View Nesting New</a>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- #region Tab 2 TODO: All common if need we can move  -->
  <!-- <ng-container *ngIf="tab === 'Material Details'">
    <div class="card mt-3">
      <div class="card-header pre-formatted-text">Physical Properties</div>
      <div class="card-body">
        <div class="row">
          <div class="col-8">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Material Description</span>
            </label>
            <input type="text" formControlName="materialDesc" class="form-control" readonly />
          </div>
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Region</span>
            </label>
            <input type="text" formControlName="countryName" class="form-control" readonly />
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Density (g/cc)</span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Density')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'density'"></app-field-comment>
            <input type="number" formControlName="density" class="form-control" readonly />
          </div>

           <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Yield Strength (MPa)</span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('Yield Strength')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'materialYield'"></app-field-comment>
            <input type="number" formControlName="materialYield" class="form-control" readonly />
          </div>

           <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Tensile Strength (MPa)</span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('ShearingStrength')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'ultimateTensileStrength'"></app-field-comment>
            <input type="number" formControlName="ultimateTensileStrength" class="form-control" readonly />
          </div>

           <div class="col-4">
            <label class="form-label no-wrap has-icon">
              <span class="label-text">Shearing Strength (MPa)</span>
              <span class="notification" [ngbPopover]="popContent" placement="auto" (click)="showinfo('ShearingStrength')">
                <mat-icon class="info-icon" svgIcon="information"></mat-icon>
              </span>
            </label>
            <app-field-comment [formIdentifier]="sheetMetalVals.formIdentifier" [fieldIdentifier]="'shearingStrength'"></app-field-comment>
            <input type="number" formControlName="shearingStrength" class="form-control" readonly />
          </div>
          
        </div>
      </div>
    </div>
  </ng-container> -->
  <!-- #endregion Tab 2  -->
</div>
<div>
  <ng-template #popContent>
    <div [innerHTML]="popupName"></div>
    <div class="div-img" *ngIf="popupUrl">
      <img alt="" class="img-class" [src]="popupUrl" />
    </div>
  </ng-template>
</div>
